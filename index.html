<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
<title>KraveAI</title>
<style>
  /* ====== THEME ====== */
  :root {
    --bg: #0f1419;
    --card: #141a21;
    --card-2: #11171d;
    --muted: #8ea0b2;
    --text: #e9eef5;
    --line: #1f2833;
    --brand: #19c2ff;
    --accent: #0077ff;
    --chip: #1b2430;
    --chip-text: #dfe7ef;
    --success: #25d366;
  }
  .light {
    --bg: #f6f8fb;
    --card: #ffffff;
    --card-2: #ffffff;
    --muted: #5c6b7a;
    --text: #0b1220;
    --line: #e7edf4;
    --brand: #0077ff;
    --accent: #0057d6;
    --chip: #eef3f8;
    --chip-text: #0b1220;
  }
  .neon-theme {
    --bg: #0a0f14;
    --card: #1a2430;
    --text: #e0f7ff;
    --brand: #00ffcc;
    --accent: #ff00ff;
    --line: #2a3442;
  }
  * { box-sizing: border-box }
  html, body { height: 100%; margin: 0; padding: 0; }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    overflow-x: hidden;
    position: relative;
  }
  a { color: inherit; text-decoration: none }
  .hidden { display: none !important }
  .muted { color: var(--muted) }
  .btn {
    background: var(--card);
    color: var(--text);
    border: 1px solid var(--line);
    padding: 10px 14px;
    border-radius: 12px;
    cursor: pointer;
  }
  .btn.primary { background: linear-gradient(90deg, var(--accent), var(--brand)); border-color: transparent; color: #fff }
  .btn.ghost { background: transparent }
  .input {
    width: 100%;
    background: var(--card);
    color: var(--text);
    border: 1px solid var(--line);
    padding: 12px 14px;
    border-radius: 14px;
    outline: none;
  }

  /* ====== HEADER ====== */
  .topbar {
    position: sticky;
    top: 0;
    z-index: 50;
    background: var(--card-2);
    border-bottom: 1px solid var(--line);
    padding: 14px calc(14px + env(safe-area-inset-left, 0px)) calc(14px + env(safe-area-inset-right, 0px));
    display: flex;
    align-items: center;
    gap: 12px;
    justify-content: space-between;
    width: 100vw;
    box-sizing: border-box;
  }
  .brand { display: flex; align-items: center; gap: 10px; font-weight: 800 }
  .brand .name { letter-spacing: .2px; text-shadow: 0 0 10px rgba(25, 194, 255, 0.7), 0 0 20px rgba(0, 119, 255, 0.5); }
  .robot { width: 28px; height: 28px; display: block }
  .right-head { display: flex; align-items: center; gap: 12px }
  .pill { font-size: 12px; color: var(--muted); display: flex; gap: 6px; align-items: center }
  .dot { width: 8px; height: 8px; border-radius: 999px; background: #e0565b }
  .toggle {
    border: 1px solid var(--line);
    background: transparent;
    color: var(--muted);
    padding: 8px 10px;
    border-radius: 10px;
    cursor: pointer;
  }
  .mic-btn {
    border: 1px solid var(--line);
    background: transparent;
    color: var(--muted);
    padding: 8px;
    border-radius: 10px;
    cursor: pointer;
  }
  .mic-btn.recording { animation: pulse 1s infinite; }
  @keyframes pulse { 50% { box-shadow: 0 0 10px var(--brand); } }

  /* ====== LAYOUT ====== */
  .wrap {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    padding: 10px calc(14px + env(safe-area-inset-left, 0px)) calc(60px + env(safe-area-inset-bottom, 0px)) calc(14px + env(safe-area-inset-right, 0px));
    width: 100vw;
    box-sizing: border-box;
    overflow-y: auto;
  }
  .content-flex { flex: 1 0 auto; }
  h1 { margin: 8px 0 0; font-size: 28px; text-shadow: 0 0 10px rgba(25, 194, 255, 0.7), 0 0 20px rgba(0, 119, 255, 0.5); }
  .section-title { margin: 22px 0 12px; font-weight: 800; letter-spacing: .4px; text-shadow: 0 0 8px rgba(25, 194, 255, 0.6), 0 0 15px rgba(0, 119, 255, 0.4); }

  /* ====== GRID SOCIAL ====== */
  .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 14px }
  @media (min-width: 760px) { .grid { grid-template-columns: repeat(4, 1fr) } }
  .card {
    background: var(--card);
    border: 1px solid var(--line);
    border-radius: 18px;
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    transition: transform .12s ease, box-shadow .2s ease;
    box-shadow: 0 0 15px rgba(25, 194, 255, 0.3), inset 0 0 10px rgba(0, 119, 255, 0.2);
  }
  .card:hover { transform: translateY(-1px); box-shadow: 0 0 20px rgba(25, 194, 255, 0.5), inset 0 0 15px rgba(0, 119, 255, 0.3); }
  .logo-wrap { width: 28px; height: 28px; display: grid; place-items: center }
  .card .title { font-weight: 700; text-shadow: 0 0 5px rgba(255, 255, 255, 0.8); }

  /* ====== CLIENTES LIST ====== */
  .list { display: flex; flex-direction: column; gap: 12px; margin-bottom: 0; }
  .row {
    background: var(--card);
    border: 1px solid var(--line);
    border-radius: 14px;
    padding: 12px;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: transform .12s ease, box-shadow .2s ease;
    box-shadow: 0 0 10px rgba(25, 194, 255, 0.2);
  }
  .row:hover { transform: translateY(-1px); box-shadow: 0 0 15px rgba(25, 194, 255, 0.4); }
  .avatar { width: 36px; height: 36px; border-radius: 999px; background: #2a3442; flex: none; overflow: hidden }
  .row .user { font-weight: 700; font-size: 16px; }
  .grow { flex: 1 }
  .chip { background: var(--chip); color: var(--chip-text); border-radius: 999px; padding: 6px 10px; font-size: 12px }

  /* ====== VERIFIED ====== */
  .ig-verified {
    width: 24px;
    height: 24px;
    display: inline-block;
    vertical-align: middle;
    margin-left: 4px;
    shape-rendering: geometricPrecision;
  }

  /* ====== NAV BOTTOM ====== */
  .nav {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 60;
    background: var(--card-2);
    border-top: 1px solid var(--line);
    display: flex;
    gap: 10px;
    padding: 12px calc(12px + env(safe-area-inset-left, 0px)) calc(12px + env(safe-area-inset-bottom, 0px)) calc(12px + env(safe-area-inset-right, 0px));
    justify-content: space-around;
    width: 100vw;
    box-sizing: border-box;
    box-shadow: 0 0 20px rgba(25, 194, 255, 0.3);
  }
  .nav .item {
    flex: 1;
    text-align: center;
    padding: 12px 10px;
    border-radius: 14px;
    color: var(--muted);
    font-size: 13.5px;
    cursor: pointer;
    min-height: 48px;
    line-height: 1;
    -webkit-tap-highlight-color: transparent;
    transition: color .2s ease, background .2s ease;
  }
  .nav .item.active { color: var(--text); background: rgba(255, 255, 255, .02); border: 1px solid var(--line); text-shadow: 0 0 5px rgba(25, 194, 255, 0.7); }

  /* ====== VISTAS ====== */
  .view { display: none; }
  .view.active { display: block; animation: fadeIn 0.3s ease-in; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

  /* ====== NETWORK VIEW ====== */
  .back { margin: 6px 0 16px; display: inline-flex; gap: 8px; align-items: center; color: var(--muted); cursor: pointer; transition: color .2s ease; }
  .back:hover { color: var(--text); }
  .svc-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px }
  @media (min-width: 860px) { .svc-grid { grid-template-columns: repeat(3, 1fr) } }
  .svc { background: var(--card); border: 1px solid var(--line); border-radius: 16px; padding: 14px; box-shadow: 0 0 10px rgba(25, 194, 255, 0.2); }
  .svc h4 { margin: 0 0 10px; font-size: 14px; text-shadow: 0 0 5px rgba(255, 255, 255, 0.6); }
  .svc .input { margin: 6px 0 }
  .svc .btn { width: 100%; margin-top: 8px }

  /* ====== FARM ====== */
  .devices { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px }
  @media (min-width: 820px) { .devices { grid-template-columns: repeat(3, 1fr) } }
  .device { background: var(--card); border: 1px solid var(--line); border-radius: 14px; padding: 12px; box-shadow: 0 0 10px rgba(25, 194, 255, 0.2); }
  .device .thumb { height: 86px; border-radius: 10px; background: #0b1220; border: 1px dashed var(--line); margin-bottom: 10px }
  .device .btn { width: 48% }

  /* ====== CUENTAS ====== */
  .stack { display: flex; flex-direction: column; gap: 10px }

  /* ====== FOOTER BADGE ====== */
  .credit {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    bottom: calc(var(--nav-h, 64px) + env(safe-area-inset-bottom, 0px) + 10px);
    z-index: 61;
    padding: 8px 14px;
    border-radius: 999px;
    font-size: 12px;
    color: #fff;
    background: rgba(41, 178, 255, .12);
    border: 1px solid rgba(41, 178, 255, .35);
    box-shadow: 0 0 30px 6px rgba(41, 178, 255, .35), inset 0 0 24px rgba(41, 178, 255, .25);
    backdrop-filter: blur(6px);
    pointer-events: none;
    animation: pulse-glow 2.8s ease-in-out infinite;
  }
  @keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 26px 5px rgba(41, 178, 255, .32), inset 0 0 22px rgba(41, 178, 255, .22); }
    50% { box-shadow: 0 0 42px 10px rgba(41, 178, 255, .55), inset 0 0 28px rgba(41, 178, 255, .30); }
  }

  /* ====== MODAL FICHA CLIENTE ====== */
  .modal { position: fixed; inset: 0; background: rgba(0, 0, 0, .55); display: none; align-items: center; justify-content: center; z-index: 70 }
  .modal.show { display: flex; animation: fadeInModal 0.3s ease-in; }
  @keyframes fadeInModal { from { opacity: 0; } to { opacity: 1; } }
  .sheet {
    width: min(560px, 92vw);
    background: var(--card-2);
    border: 1px solid var(--line);
    border-radius: 16px;
    padding: 16px;
    box-shadow: 0 0 20px rgba(25, 194, 255, 0.3);
  }
  .sheet .top { display: flex; gap: 12px; align-items: center }
  .sheet .top .avatar { width: 56px; height: 56px }
  .meta { display: flex; gap: 14px; margin-top: 6px; color: var(--muted); font-size: 12px }
  .meta b { color: var(--text) }
  .close { float: right; cursor: pointer; color: var(--muted); transition: color .2s ease; }
  .close:hover { color: var(--text); }

  /* ====== MODO BESTIA ====== */
  .beast-mode-card {
    background: linear-gradient(45deg, var(--accent), var(--brand));
    border: 1px solid rgba(25, 194, 255, 0.5);
    border-radius: 18px;
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    transition: transform .12s ease, box-shadow .2s ease;
    box-shadow: 0 0 20px rgba(255, 69, 0, 0.5), inset 0 0 15px rgba(255, 69, 0, 0.3);
  }
  .beast-mode-card:hover { transform: translateY(-1px); box-shadow: 0 0 25px rgba(255, 69, 0, 0.7), inset 0 0 20px rgba(255, 69, 0, 0.4); }
  .beast-mode-card .logo-wrap { width: 28px; height: 28px; display: grid; place-items: center }
  .beast-mode-card .title { font-weight: 700; color: #fff; text-shadow: 0 0 5px rgba(255, 255, 255, 0.8); }
  .beast-mode-card .beast-icon { width: 24px; height: 24px; fill: #fff }

  /* ====== LOADING SPINNER ====== */
  .spinner {
    display: inline-block;
    width: 12px;
    height: 12px;
    border: 2px solid transparent;
    border-top: 2px solid var(--brand);
    border-left: 2px solid var(--accent);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-left: 8px;
    vertical-align: middle;
  }
  @keyframes spin { 100% { transform: rotate(360deg); } }
  .btn.loading { position: relative; opacity: 0.7; pointer-events: none; }

  /* ====== TOAST NOTIFICATIONS ====== */
  .toast {
    position: fixed;
    bottom: calc(var(--nav-h, 64px) + env(safe-area-inset-bottom, 0px) + 80px);
    left: 50%;
    transform: translateX(-50%);
    background: var(--card);
    color: var(--text);
    padding: 12px 20px;
    border-radius: 12px;
    border: 1px solid var(--line);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    z-index: 100;
    opacity: 0;
    animation: slide-up 0.5s ease-out, fade-out 3s ease-out 2.5s;
  }
  @keyframes slide-up { from { bottom: -50px; } to { bottom: calc(var(--nav-h, 64px) + 80px); } }
  @keyframes fade-out { to { opacity: 0; } }

  /* ====== BACKGROUND 3D ====== */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at 50% 50%, rgba(25, 194, 255, 0.05) 0%, rgba(0, 119, 255, 0.02) 70%, transparent 100%);
    z-index: -1;
    animation: rotate 20s linear infinite;
  }
  @keyframes rotate { 100% { transform: rotate(360deg); } }

  /* ====== MEDIA QUERIES ====== */
  @media (max-width: 480px) {
    .wrap { padding: 10px calc(14px + env(safe-area-inset-left, 0px)) calc(60px + env(safe-area-inset-bottom, 0px)) calc(14px + env(safe-area-inset-right, 0px)); }
    .topbar { padding-left: calc(14px + env(safe-area-inset-left, 0px)); padding-right: calc(14px + env(safe-area-inset-right, 0px)); }
    .nav { padding-left: calc(12px + env(safe-area-inset-left, 0px)); padding-right: calc(12px + env(safe-area-inset-right, 0px)); }
    .grid { grid-template-columns: repeat(2, 1fr); }
  }
</style>
</head>
<body>
  <!-- ====== HEADER ====== -->
  <header class="topbar">
    <div class="brand">
      <svg class="robot" viewBox="0 0 64 64" aria-hidden="true">
        <defs>
          <linearGradient id="g" x1="0" x2="1">
            <stop offset="0" stop-color="#19c2ff"/><stop offset="1" stop-color="#0077ff"/>
          </linearGradient>
        </defs>
        <rect x="2" y="10" width="60" height="44" rx="12" fill="url(#g)"/>
        <rect x="8" y="16" width="48" height="32" rx="8" fill="#0b1220"/>
        <circle cx="22" cy="32" r="6" fill="#19c2ff"/>
        <circle cx="42" cy="32" r="6" fill="#19c2ff"/>
        <rect x="28" y="40" width="8" height="4" rx="2" fill="#19c2ff"/>
      </svg>
      <span class="name">KraveAI</span>
    </div>
    <div class="right-head">
      <div class="pill"><span class="dot"></span> <span id="conn">Sin conexión</span></div>
      <button id="themeToggle" class="toggle" title="Cambiar tema">🌙</button>
      <button id="micToggle" class="mic-btn" title="Activar voz">🎙️</button>
    </div>
  </header>

  <!-- ====== CONTENIDO ====== -->
  <main class="wrap">
    <div class="content-flex">
      <!-- Home -->
      <section id="view-home" class="view active">
        <h1>Redes sociales</h1>
        <div class="sub">Domina todas tus redes con IA</div>

        <div class="section-title">Redes</div>
        <div class="grid" id="socialGrid">
          <!-- Cards de redes, inyectadas por JS -->
        </div>

        <div class="section-title">Clientes recientes</div>
        <div class="list" id="recentList"></div>

        <div style="display: flex; gap: 10px; margin-top: 14px">
          <input id="aiPrompt" class="input" placeholder="¿Qué quieres automatizar hoy?" />
          <button class="btn primary" onclick="sendAction()">Enviar</button>
        </div>
      </section>

      <!-- Clientes -->
      <section id="view-clients" class="view">
        <h1>Clientes</h1>
        <input id="clientSearch" class="input" placeholder="Buscar cliente (@usuario o nombre)" style="margin: 12px 0 16px"/>
        <div class="list" id="clientsList"></div>
      </section>

      <!-- Farm -->
      <section id="view-farm" class="view">
        <h1>Device Farm</h1>
        <div class="sub">Streams: HLS .m3u8, MJPEG .mjpg o visor https.</div>
        <div class="devices" id="farmGrid"></div>
      </section>

      <!-- Cuentas -->
      <section id="view-accounts" class="view">
        <h1>Cuentas</h1>
        <div class="sub">Gestión de sesión y cuentas manuales</div>
        <div class="stack" style="max-width: 560px">
          <div class="svc">
            <h4>Iniciar sesión</h4>
            <input class="input" placeholder="Usuario" />
            <input class="input" placeholder="Contraseña" type="password"/>
            <div style="display: flex; gap: 10px">
              <button class="btn primary">Iniciar sesión</button>
              <button class="btn">Cerrar sesión</button>
            </div>
          </div>
          <div class="svc">
            <h4>Agregar cuenta manual</h4>
            <input class="input" placeholder="@usuario"/>
            <input class="input" placeholder="Token / Contraseña" type="password"/>
            <button class="btn primary">Guardar cuenta</button>
          </div>
        </div>
      </section>

      <!-- Network -->
      <section id="view-network" class="view">
        <div class="back" onclick="goHome()">← Atrás</div>
        <h1 id="networkTitle">Servicios</h1>
        <div class="sub" id="networkSub">Selecciona un servicio para esta red</div>
        <div class="svc-grid" id="networkServices"></div>
      </section>
    </div>
  </main>

  <!-- ====== BADGE ====== -->
  <div class="credit">Created by Karmean Gómez</div>

  <!-- ====== NAV ====== -->
  <nav class="nav">
    <div class="item active" data-go="home">Inicio</div>
    <div class="item" data-go="clients">Clientes</div>
    <div class="item" data-go="farm">Farm</div>
    <div class="item" data-go="accounts">Cuentas</div>
  </nav>

  <!-- ====== MODAL FICHA ====== -->
  <div class="modal" id="clientModal" role="dialog" aria-modal="true" aria-label="Ficha del cliente">
    <div class="sheet">
      <div class="close" onclick="closeModal()">✕</div>
      <div class="top">
        <img id="mAvatar" class="avatar" alt="avatar"/>
        <div>
          <div id="mUser" style="font-weight: 800"></div>
          <div class="muted" id="mName"></div>
          <div class="meta">
            <div><b id="mPosts"></b> posts</div>
            <div><b id="mFollowers"></b> seguidores</div>
            <div><b id="mFollowing"></b> siguiendo</div>
          </div>
        </div>
      </div>
      <div style="margin-top: 14px; display: flex; gap: 10px">
        <button class="btn">Abrir Instagram</button>
        <button class="btn primary">Crear campaña</button>
      </div>
    </div>
  </div>

  <!-- ====== SVGs ====== -->
  <svg style="position: absolute; width: 0; height: 0; overflow: hidden">
    <symbol id="igVerified" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet">
      <defs>
        <radialGradient id="metaBlue" cx="50%" cy="40%" r="70%">
          <stop offset="0" stop-color="#67B7FF"/>
          <stop offset="1" stop-color="#0B65FF"/>
        </radialGradient>
      </defs>
      <path fill="url(#metaBlue)" d="M12 2.4l2.15 1.3 2.46-.14 1.15 2.17 2.17 1.15-.14 2.46 1.3 2.15-1.3 2.15.14 2.46-2.17 1.15-1.15 2.17-2.46-.14L12 21.6l-2.15-1.3-2.46.14-1.15-2.17-2.17-1.15.14-2.46L2.4 12l1.3-2.15-.14-2.46 2.17-1.15 1.15-2.17 2.46.14L12 2.4z"/>
      <path fill="#fff" d="M10.25 14.6l-2.1-2.1 1.3-1.3 1.6 1.6 4.1-4.1 1.3 1.3-5.4 5.4z"/>
    </symbol>
    <symbol id="beastIcon" viewBox="0 0 24 24">
      <path fill="#fff" d="M12 2L9 5h6l-3-3zm-1 17v-7h2v7h-2zm-4 0v-9h2v9H7zm8 0v-9h2v9h-2zM4 12c0-4.4 3.6-8 8-8s8 3.6 8 8-3.6 8-8 8-8-3.6-8-8z"/>
    </symbol>
    <symbol id="ig" viewBox="0 0 24 24"><defs><linearGradient id="igG" x1="0" x2="1"><stop offset="0" stop-color="#ff7a00"/><stop offset="1" stop-color="#e600ff"/></linearGradient></defs><rect x="2" y="2" width="20" height="20" rx="5" fill="url(#igG)"/><circle cx="12" cy="12" r="4.2" fill="#fff"/><circle cx="18" cy="6" r="1.6" fill="#fff"/></symbol>
    <symbol id="tiktok" viewBox="0 0 24 24"><path fill="#25F4EE" d="M10 4h3v9a4 4 0 11-3.2-3.9V8.1A7 7 0 003 15a7 7 0 1011-5.8V4z"/><path fill="#FE2C55" d="M13 4a6 6 0 006 6V7a3 3 0 01-3-3h-3z"/><path fill="#fff" d="M13 7.8v5.2a4 4 0 11-3.2-3.9V7.8A7 7 0 003 15a7 7 0 1011-5.8z"/></symbol>
    <symbol id="yt" viewBox="0 0 24 24"><path fill="#FF0000" d="M22 12s0-4-1-5c-1-1-5-1-9-1s-8 0-9 1-1 5-1 5 0 4 1 5 5 1 9 1 8 0 9-1 1-5 1-5z"/><path fill="#fff" d="M10 15V9l6 3-6 3z"/></symbol>
    <symbol id="threads" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#000"/><path fill="#fff" d="M8.5 12c0 2.2 1.8 3.5 3.7 3.5 2.3 0 3.8-1.4 3.8-3.8 0-2.7-1.8-4.2-4.8-4.2h-.9V6h.8c3.9 0 6.5 2.2 6.5 5.9 0 3.2-2.4 5.3-5.6 5.3-3.2 0-5.5-2.1-5.5-5.2h1z"/></symbol>
    <symbol id="x" viewBox="0 0 24 24"><path fill="#fff" d="M17.5 4H20l-5.5 6 6 10h-5l-3.5-6-4 4-3-2 5-5-5-7h5l3 5 4.5-5z"/></symbol>
    <symbol id="fb" viewBox="0 0 24 24"><path fill="#1877F2" d="M22 12C22 6.48 17.52 2 12 2S2 6.48 2 12a10 10 0 008.5 9.87v-6.98H8.07v-2.9h2.43V9.41c0-2.4 1.43-3.73 3.63-3.73 1.05 0 2.15.19 2.15.19v2.36h-1.21c-1.19 0-1.56.74-1.56 1.49v1.79h2.65l-.42 2.9h-2.23V21.9A10 10 0 0022 12z"/></symbol>
    <symbol id="li" viewBox="0 0 24 24"><path fill="#0A66C2" d="M20.45 20.45H17V14.6c0-1.39-.5-2.34-1.75-2.34-.95 0-1.52.64-1.77 1.26-.09.22-.11.52-.11.82v6.11H9.89s.05-9.92 0-10.95h3.48v1.55c.46-.71 1.29-1.72 3.13-1.72 2.28 0 3.95 1.49 3.95 4.69v6.43zM7.34 8.94a2.02 2.02 0 110-4.04 2.02 2.02 0 010 4.04zM5.57 20.45h3.54V9.5H5.57v10.95z"/></symbol>
    <symbol id="sp" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#1DB954"/><path fill="#fff" d="M7 9c4-1 8 0 10 1 .5.2.7.8.5 1.3-.3.5-.9.6-1.4.4-1.8-.9-5-1.7-8.7-.7-.6.2-1.1-.2-1.3-.8-.2-.6.2-1.1.9-1.2zM7 12c3-.7 6 0 8 .7.4.1.7.6.5 1-.2.5-.7.6-1.2.4-1.6-.7-4.1-1.3-7.2-.6-.5.1-1-.2-1.1-.7-.1-.6.2-1 .9-1.2zM7 15c2-.4 4 .1 5.4.6.4.1.6.5.5.9-.1.4-.5.5-.9.4-1.2-.5-3-1-4.6-.6-.4.1-.8-.1-.9-.5-.1-.5.1-.8.5-.8z"/></symbol>
    <symbol id="tg" viewBox="0 0 24 24"><path fill="#229ED9" d="M9.6 16.8l-.4 3.7c.6 0 .9-.3 1.2-.6l2.8-2.7 5.8 4.3c1 .6 1.6.3 1.9-.9l3.4-16c.3-1.2-.4-1.7-1.3-1.4L2.2 9.9c-1.1.4-1.1 1.1-.2 1.4l5.6 1.7L18.8 6c.7-.4 1.2-.2.7.3"/></symbol>
    <symbol id="wa" viewBox="0 0 24 24"><path fill="#25D366" d="M20.5 3.5A10 10 0 003.6 20.4L2 22l1.8-.5a10 10 0 0014.3-14zM12 19a7 7 0 116.2-10.2A7 7 0 0112 19z"/><path fill="#25D366" d="M8.8 7.7c-.4 0-.7.3-.7.7 0 2.2 2.2 4.4 4.4 4.4.4 0 .7-.3.7-.7 0-.2-.1-.5-.3-.6l-1.1-.6c-.1-.1-.3-.1-.4 0l-.3.2c-.6-.3-1.1-.8-1.4-1.4l.2-.3c.1-.1.1-.3 0-.4l-.6-1.1c-.1-.2-.4-.3-.6-.3z"/></symbol>
  </svg>

<script>
/* ====== TEMA ====== */
const themeToggle = document.getElementById('themeToggle');
const savedTheme = localStorage.getItem('krave-theme');
if (savedTheme === 'light') document.body.classList.add('light');
if (savedTheme === 'neon') document.body.classList.add('neon-theme');
themeToggle.textContent = document.body.classList.contains('light') ? '🌞' : document.body.classList.contains('neon-theme') ? '💡' : '🌙';
themeToggle.onclick = (e) => {
  const menu = document.createElement('div');
  menu.className = 'theme-menu';
  menu.innerHTML = '<div onclick="document.body.classList.add(\'light\'); localStorage.setItem(\'krave-theme\', \'light\'); themeToggle.textContent=\'🌞\'; menu.remove()">Claro</div><div onclick="document.body.classList.add(\'neon-theme\'); localStorage.setItem(\'krave-theme\', \'neon\'); themeToggle.textContent=\'💡\'; menu.remove()">Neón</div><div onclick="document.body.classList.remove(\'light\', \'neon-theme\'); localStorage.setItem(\'krave-theme\', \'dark\'); themeToggle.textContent=\'🌙\'; menu.remove()">Oscuro</div>';
  e.target.appendChild(menu);
};

/* ====== NAV ====== */
const views = {
  home: document.getElementById('view-home'),
  clients: document.getElementById('view-clients'),
  farm: document.getElementById('view-farm'),
  accounts: document.getElementById('view-accounts'),
  network: document.getElementById('view-network')
};
document.querySelectorAll('.nav .item').forEach(el => {
  el.addEventListener('click', () => {
    document.querySelectorAll('.nav .item').forEach(i => i.classList.remove('active'));
    el.classList.add('active');
    const key = el.getAttribute('data-go');
    Object.values(views).forEach(v => {
      v.style.display = 'none';
    });
    views[key].style.display = 'block';
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });
});
function goHome() {
  Object.values(views).forEach(v => v.style.display = 'none');
  views.home.style.display = 'block';
  document.querySelectorAll('.nav .item').forEach(i => i.classList.remove('active'));
  document.querySelector('.nav [data-go="home"]').classList.add('active');
}

/* ====== Ajuste dinámico para el badge ====== */
const navEl = document.querySelector('.nav');
function setNavHeight() {
  document.documentElement.style.setProperty('--nav-h', navEl.offsetHeight + 'px');
}
setNavHeight();
addEventListener('resize', setNavHeight);
addEventListener('orientationchange', setNavHeight);

/* ====== DATA: REDES ====== */
const networks = [
  { key: 'instagram', name: 'Instagram', icon: '#ig', color: '#E1306C', services: ['Likes', 'Comentarios', 'Seguidores', 'Vistas Reels', 'Compartidos', 'Guardados', 'Historias', 'Live Views'] },
  { key: 'tiktok', name: 'TikTok', icon: '#tiktok', color: '#000000', services: ['Likes', 'Comentarios', 'Seguidores', 'Views', 'Shares', 'Live Views'] },
  { key: 'youtube', name: 'YouTube', icon: '#yt', color: '#FF0000', services: ['Vistas', 'Likes', 'Comentarios', 'Suscriptores', 'Shorts Views', 'Live Views', 'Compartidos'] },
  { key: 'threads', name: 'Threads', icon: '#threads', color: '#000000', services: ['Likes', 'Respuestas', 'Seguidores', 'Vistas', 'Reposts'] },
  { key: 'x', name: 'X', icon: '#x', color: '#ffffff', services: ['Likes', 'Respuestas', 'Seguidores', 'Vistas', 'Reposts', 'Citas'] },
  { key: 'facebook', name: 'Facebook', icon: '#fb', color: '#1877F2', services: ['Likes', 'Comentarios', 'Seguidores/Página', 'Vistas', 'Compartidos', 'Live Views'] },
  { key: 'linkedin', name: 'LinkedIn', icon: '#li', color: '#0A66C2', services: ['Reacciones', 'Comentarios', 'Seguidores', 'Vistas', 'Compartidos'] },
  { key: 'spotify', name: 'Spotify', icon: '#sp', color: '#1DB954', services: ['Streams', 'Saves', 'Oyentes mensuales', 'Playlist adds'] },
  { key: 'telegram', name: 'Telegram', icon: '#tg', color: '#229ED9', services: ['Miembros', 'Vistas post', 'Forwards/Repost'] },
  { key: 'whatsapp', name: 'WhatsApp', icon: '#wa', color: '#25D366', services: ['Vistas de estado', 'Clicks', 'Mensajes masivos'] },
  { key: 'beast-mode', name: 'Modo Bestia', icon: '#beastIcon', color: 'var(--brand)', services: [] }
];

/* ====== RENDER: GRID REDES ====== */
const socialGrid = document.getElementById('socialGrid');
socialGrid.innerHTML = networks.map(n => {
  if (n.key === 'beast-mode') {
    return `
      <div class="beast-mode-card" onclick="activateBeastMode()">
        <div class="logo-wrap"><svg class="beast-icon" viewBox="0 0 24 24"><use href="#beastIcon"></use></svg></div>
        <div class="title">${n.name}</div>
      </div>
    `;
  }
  return `
    <div class="card" onclick="openNetwork('${n.key}')">
      <div class="logo-wrap"><svg width="28" height="28"><use href="${n.icon}"></use></svg></div>
      <div class="title">${n.name}</div>
    </div>
  `;
}).join('');

/* ====== VIEW NETWORK ====== */
const netTitle = document.getElementById('networkTitle');
const netSub = document.getElementById('networkSub');
const netServices = document.getElementById('networkServices');
function openNetwork(key) {
  const net = networks.find(x => x.key === key);
  if (!net) return;
  netTitle.textContent = `Servicios · ${net.name}`;
  netSub.textContent = `Automatiza ${net.name} con IA`;
  netServices.innerHTML = net.services.map(svc => `
    <div class="svc">
      <h4>${svc}</h4>
      <input class="input" placeholder="${svc.includes('Seguidores') ? '@usuario' : 'URL / ID / Nota'}" />
      <input class="input" placeholder="Cantidad" type="number" min="10" />
      <button class="btn primary">Ordenar</button>
    </div>
  `).join('');
  Object.values(views).forEach(v => v.style.display = 'none');
  views.network.style.display = 'block';
  document.querySelectorAll('.nav .item').forEach(i => i.classList.remove('active'));
}

/* ====== VERIFIED SVG ====== */
function verifiedSvg() {
  return `<svg class="ig-verified" viewBox="0 0 24 24" aria-hidden="true"><use href="#igVerified"></use></svg>`;
}

/* ====== DATA: CLIENTES ====== */
const clients = [
  { user: 'aaronmercury', name: 'Aaron Mercurio', followers: '5.4M', posts: '543', following: '924', verified: true },
  { user: 'televisadigital', name: 'Televisa Digital', followers: '246K', posts: '5,779', following: '617', verified: true },
  { user: 'joscanela', name: 'Jos Canela', followers: '722K', posts: '63', following: '425', verified: true },
  { user: 'jimenagallegotv', name: 'Jimena Gállego', followers: '544K', posts: '3,328', following: '1,608', verified: true },
  { user: 'elmalilla_', name: 'MALI EL MALILLAA!!🇲🇽', followers: '3.6M', posts: '675', following: '2,006', verified: true },
  { user: 'mariobautista', name: 'Mario Bautista (MB)', followers: '6.7M', posts: '515', following: '3,371', verified: true },
  { user: 'aldotdenigris', name: 'Aldo Tamez De Nigris', followers: '1.5M', posts: '607', following: '2,748', verified: true },
  { user: 'sonymusiclatin', name: 'Sony Music Latin', followers: '1.1M', posts: '43.3K', following: '535', verified: true },
  { user: 'lacasafamososmx', name: 'La Casa de los Famosos MX', followers: '3.3M', posts: '6,632', following: '90', verified: true },
  { user: 'manuelturizo', name: 'Manuel Turizo - MTZ', followers: '14.6M', posts: '127', following: '1,298', verified: true },
  { user: 'pesopluma', name: 'La Doble P', followers: '15.4M', posts: '44', following: '1,195', verified: true },
  { user: 'oscar_maydonn', name: 'Oscar Maydon', followers: '2.5M', posts: '20', following: '1,203', verified: true }
];
const avatars = {};

/* ====== RENDER: HOME (recientes) ====== */
const recentList = document.getElementById('recentList');
recentList.innerHTML = clients.slice(0, 12).map(c => rowHtml(c, true)).join('');
const summary = document.createElement('div');
summary.className = 'summary';
summary.textContent = `Total seguidores: ${clients.reduce((sum, c) => sum + parseInt(c.followers.replace(/[MK]/, '') * (c.followers.includes('M') ? 1000000 : 1000)), 0).toLocaleString()}`;
recentList.after(summary);

/* ====== RENDER: CLIENTS ====== */
const clientsList = document.getElementById('clientsList');
function paintClients(arr) { clientsList.innerHTML = arr.map(c => rowHtml(c, true)).join(''); }
paintClients(clients);

function rowHtml(c, withButton = false) {
  const badge = c.verified ? verifiedSvg() : '';
  const avatarUrl = avatars[c.user] || '';
  return `
    <div class="row">
      <img class="avatar" alt="" src="${avatarUrl}" onerror="this.style.background='#2a3442'; this.removeAttribute('src')" />
      <div class="grow">
        <div class="user">@${c.user} ${badge}</div>
        <div class="muted">${c.name} · ${c.followers} seguidores</div>
      </div>
      ${withButton ? `<a class="chip" href="javascript:void(0)" onclick="openCard('${c.user}')">Ver ficha</a>` : `<span class="muted">Ver ficha</span>`}
    </div>
  `;
}

/* ====== BUSCADOR CLIENTES ====== */
document.getElementById('clientSearch').addEventListener('input', e => {
  const q = e.target.value.toLowerCase().trim();
  paintClients(clients.filter(c => c.user.toLowerCase().includes(q) || c.name.toLowerCase().includes(q)));
});

/* ====== MODAL FICHA ====== */
const modal = document.getElementById('clientModal');
function openCard(user) {
  const c = clients.find(x => x.user === user);
  if (!c) return;
  document.getElementById('mAvatar').src = avatars[c.user] || '';
  document.getElementById('mAvatar').onerror = function() { this.style.background = '#2a3442'; this.removeAttribute('src'); };
  document.getElementById('mUser').innerHTML = `@${c.user} ${c.verified ? verifiedSvg() : ''}`;
  document.getElementById('mName').textContent = c.name;
  document.getElementById('mPosts').textContent = c.posts;
  document.getElementById('mFollowers').textContent = c.followers;
  document.getElementById('mFollowing').textContent = c.following;
  modal.classList.add('show');
}
function closeModal() { modal.classList.remove('show'); }
modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });

/* ====== FARM ====== */
const farmGrid = document.getElementById('farmGrid');
const devices = [
  { name: 'iPhone 14 Pro · iOS', id: '10.0.0.8' },
  { name: 'Galaxy S23 · Android', id: '10.0.0.9' },
  { name: 'iPhone 13 · iOS', id: '10.0.0.10' },
  { name: 'Pixel 8 · Android', id: '10.0.0.11' },
  { name: 'iPhone 12 mini · iOS', id: '10.0.0.12' },
  { name: 'Galaxy A54 · Android', id: '10.0.0.13' }
];
farmGrid.innerHTML = devices.map(d => `
  <div class="device">
    <div class="thumb"></div>
    <div style="font-weight: 700">${d.name}</div>
    <div class="muted">${d.id}</div>
    <div style="display: flex; gap: 8px; margin-top: 10px">
      <button class="btn primary" onclick="alert('Asignar stream a ${d.name}')">Asignar stream</button>
      <button class="btn" onclick="alert('Limpiar ${d.name}')">Limpiar</button>
    </div>
  </div>
`).join('');

/* ====== MODO BESTIA ====== */
function activateBeastMode() {
  const beastCard = document.querySelector('.beast-mode-card');
  beastCard.style.background = '#FF4500'; // Cambio a naranja sin partículas
  showToast('Modo Bestia activado');
  setTimeout(() => {
    beastCard.style.background = 'linear-gradient(45deg, var(--accent), var(--brand))';
  }, 1000);
}

/* ====== LOADING ACTION ====== */
function sendAction() {
  const button = document.querySelector('.btn.primary');
  button.innerHTML = 'Enviando <span class="spinner"></span>';
  button.classList.add('loading');
  setTimeout(() => {
    button.innerHTML = 'Enviar';
    button.classList.remove('loading');
    showToast('Acción enviada');
  }, 2000);
}

/* ====== TOAST NOTIFICATIONS ====== */
function showToast(message) {
  const toast = document.createElement('div');
  toast.className = 'toast';
  toast.textContent = message;
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 3000);
}

/* ====== VOICE MODE ====== */
const micToggle = document.getElementById('micToggle');
if ('webkitSpeechRecognition' in window) {
  const recognition = new webkitSpeechRecognition();
  recognition.continuous = false;
  recognition.interimResults = false;
  recognition.lang = 'es-ES';
  micToggle.addEventListener('click', () => {
    recognition.start();
    micToggle.textContent = '🎙️ (Escuchando)';
    micToggle.classList.add('recording');
  });
  recognition.onresult = (event) => {
    const command = event.results[0][0].transcript.toLowerCase();
    micToggle.textContent = '🎙️';
    micToggle.classList.remove('recording');
    if (command.includes('ir a clientes')) {
      document.querySelector('.nav [data-go="clients"]').click();
      showToast('Navegando a Clientes');
    } else if (command.includes('activar modo bestia')) {
      activateBeastMode();
      showToast('Modo Bestia activado');
    }
  };
  recognition.onerror = () => {
    micToggle.textContent = '🎙️';
    micToggle.classList.remove('recording');
    showToast('Error en reconocimiento de voz');
  };
} else {
  micToggle.style.display = 'none';
}
</script>
</body>
</html>