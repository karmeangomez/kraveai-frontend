<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no">
<title>KraveAI ‚Äî Panel</title>
<meta name="theme-color" content="#0b0d12">
<style>
/* ========================= TOKENS ========================= */
:root{
  --bg:#0b0d12; --elev:#0e131b; --card:#121826; --text:#eef2f8; --muted:#9aa6bb; --line:#1f2a3a;
  --ac1:#7c5cff; --ac2:#00d3c2; --ok:#22c55e; --err:#ef4444;
  --r:16px; --gap:12px; --shadow:0 18px 40px rgba(0,0,0,.35);
  --orb-a: rgba(124,92,255,.25); --orb-b: rgba(0,211,194,.25);
}
:root[data-theme="light"]{
  --bg:#f6f8fc; --elev:#ffffff; --card:#ffffff; --text:#0c111b; --muted:#667389; --line:#e5e9f2;
  --shadow:0 12px 26px rgba(0,0,0,.08);
  --orb-a: rgba(124,92,255,.18); --orb-b: rgba(0,211,194,.18);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:var(--bg);color:var(--text);
  font:15px/1.45 system-ui,-apple-system,"SF Pro Text",Inter,Roboto,Segoe UI;
}

/* ====== Layout general sin scroll ====== */
.app{height:100svh;display:grid;grid-template-rows:auto 1fr auto}
.top{
  position:sticky;top:0;z-index:20;
  display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:10px;
  padding:10px max(14px,env(safe-area-inset-left)) 8px max(14px,env(safe-area-inset-right));
  background:color-mix(in oklab,var(--elev) 92%, transparent);border-bottom:1px solid var(--line);
  backdrop-filter:saturate(1.05) blur(10px);
}
.brand{display:flex;align-items:center;gap:10px}
.badge{width:34px;height:34px;border-radius:12px;display:grid;place-items:center;
  background:linear-gradient(135deg,var(--ac1),var(--ac2));box-shadow:0 10px 22px rgba(124,92,255,.28),0 8px 16px rgba(0,211,194,.16)}
.word{font-weight:900;letter-spacing:.16em}
.status{display:flex;align-items:center;gap:8px;color:var(--muted);justify-self:center}
.status .dot{width:8px;height:8px;border-radius:50%;background:var(--err)}
.theme{width:34px;height:34px;border-radius:12px;border:1px solid var(--line);display:grid;place-items:center;cursor:pointer;background:rgba(255,255,255,.04)}

.main{
  position:relative;
  height:calc(100svh - 56px - 64px - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  overflow:hidden; /* sin scroll */
}

/* ====== Contenedor escalable (fit-to-viewport) ====== */
.fit{
  position:absolute; inset:10px max(14px,env(safe-area-inset-right)) 10px max(14px,env(safe-area-inset-left));
  display:grid; grid-template-rows:auto 1fr auto; gap:14px;
  transform-origin: top center;
}

/* ====== Orb cabecera ====== */
.hero{
  position:relative; display:flex; align-items:center; justify-content:center; min-height:110px;
}
.orb-wrap{position:absolute; top:-10px; left:50%; transform:translateX(-50%);}
.orb{
  width:160px; height:160px; border-radius:50%;
  background:
    radial-gradient(60% 60% at 35% 35%, rgba(255,255,255,.65), transparent 60%),
    radial-gradient(120% 120% at 70% 30%, var(--ac2), transparent 60%),
    radial-gradient(120% 120% at 30% 70%, var(--ac1), transparent 60%),
    radial-gradient(100% 100% at 50% 50%, rgba(0,0,0,.25), transparent 70%);
  box-shadow:
    0 0 0 6px color-mix(in oklab, var(--ac2) 30%, transparent),
    0 0 42px 8px color-mix(in oklab, var(--ac1) 26%, transparent);
  animation: orbfloat 6s ease-in-out infinite;
}
@keyframes orbfloat{
  0%,100%{transform:translate(-50%,0) scale(1)}
  50%{transform:translate(-50%,-6px) scale(1.03)}
}

/* ====== Home grid ====== */
.home{
  display:grid; grid-template-columns:1.15fr .85fr; gap:14px; align-items:stretch;
}
@media (max-width:700px){ .home{ grid-template-columns:1fr } }

.card{
  background:linear-gradient(180deg, color-mix(in oklab, var(--card) 96%, transparent), color-mix(in oklab, var(--card) 100%, transparent));
  border:1px solid var(--line); border-radius:18px; box-shadow:var(--shadow);
}
.section{padding:14px}
.h1{font-size:clamp(20px, 3.8vh, 28px); font-weight:900; margin:0}
.p{color:var(--muted); margin:4px 0 0}

.grid-social{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:10px; margin-top:10px}
@media (min-width:780px){ .grid-social{ grid-template-columns:repeat(3,minmax(0,1fr)) } }
.btn-net{
  display:flex; align-items:center; gap:10px;
  padding:12px 12px; border-radius:14px; border:1px solid var(--line);
  background:rgba(255,255,255,.03); cursor:pointer; font-weight:800;
}
.btn-net .ico{width:22px;height:22px;display:grid;place-items:center}
.btn-net:hover{background:rgba(255,255,255,.06)}

/* Acciones r√°pidas */
.actions .row{display:flex; gap:10px}
.input{flex:1; display:flex; align-items:center; gap:8px; padding:10px 12px; border-radius:12px; border:1px solid var(--line); background:rgba(255,255,255,.04)}
.input input{flex:1; background:transparent; border:0; outline:none; color:var(--text)}
.btn{
  border:0; border-radius:12px; padding:10px 14px; font-weight:800; cursor:pointer;
  background:linear-gradient(135deg,var(--ac1),var(--ac2)); color:#081018;
}

/* ====== Clientes ====== */
.clients-bar{display:grid; grid-template-columns:1fr 1fr; gap:10px; align-items:start}
@media (max-width:700px){ .clients-bar{ grid-template-columns:1fr } }
.client{
  display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:14px;
  border:1px solid var(--line); background:rgba(255,255,255,.03);
}
.avatar{width:30px;height:30px;border-radius:50%;overflow:hidden;display:grid;place-items:center;background:rgba(255,255,255,.06);border:1px solid var(--line)}
.avatar svg{width:18px;height:18px}
.handle{font-weight:800}
.sub{color:var(--muted); font-size:.86rem}
.ig-verify{width:18px;height:18px;margin-left:6px}

/* ====== Tabs ====== */
.nav{
  position:sticky; bottom:0; z-index:30;
  display:grid; grid-template-columns:repeat(5,1fr); gap:8px;
  padding:8px max(14px,env(safe-area-inset-left)) calc(8px + env(safe-area-inset-bottom)) max(14px,env(safe-area-inset-right));
  background:color-mix(in oklab,var(--elev) 92%, transparent); border-top:1px solid var(--line);
  backdrop-filter:saturate(1.05) blur(10px);
}
.tab{display:flex;flex-direction:column;align-items:center;gap:4px;padding:8px;border-radius:12px;color:var(--muted);border:1px solid transparent;cursor:pointer}
.tab svg{width:18px;height:18px}
input[name="tab"]{position:absolute;opacity:0;pointer-events:none}
#t-home:checked ~ .app .nav label[for="t-home"],
#t-services:checked ~ .app .nav label[for="t-services"],
#t-clients:checked ~ .app .nav label[for="t-clients"],
#t-farm:checked ~ .app .nav label[for="t-farm"],
#t-acc:checked ~ .app .nav label[for="t-acc"]{color:var(--text);background:rgba(255,255,255,.04);border-color:var(--line)}
.view{display:none;height:100%;overflow:hidden}
#t-home:checked ~ .app .view[data-v="home"],
#t-services:checked ~ .app .view[data-v="services"],
#t-clients:checked ~ .app .view[data-v="clients"],
#t-farm:checked ~ .app .view[data-v="farm"],
#t-acc:checked ~ .app .view[data-v="acc"]{display:block}

/* ====== Servicios (pane contenido) ====== */
.svc-head{display:flex;align-items:center;justify-content:space-between;gap:10px}
.svc-title{display:flex;align-items:center;gap:10px;font-weight:900}
.svc-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;margin-top:10px}
.svc-btn{padding:12px;border:1px solid var(--line);border-radius:14px;background:rgba(255,255,255,.03);cursor:pointer;font-weight:800}
.svc-btn:hover{background:rgba(255,255,255,.06)}

.form{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
.form .input{background:rgba(255,255,255,.04)}
.form .wide{grid-column:1/-1}
.form .actions{display:flex;gap:10px}

/* ====== Farm ====== */
.farm{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
@media (max-width:900px){ .farm{grid-template-columns:repeat(2,1fr)} }
@media (max-width:600px){ .farm{grid-template-columns:1fr} }
.dev{display:grid;gap:8px;padding:10px}
.dev-head{display:flex;justify-content:space-between;align-items:center}
.screen{border:1px solid var(--line);border-radius:14px;overflow:hidden;background:#000;height:180px;position:relative}
.screen iframe,.screen img,.screen video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
.screen .placeholder{position:absolute;inset:0;background:radial-gradient(120% 80% at 10% 10%, var(--orb-a), transparent 60%), radial-gradient(120% 80% at 90% 80%, var(--orb-b), transparent 60%), #000}

/* ====== Firma (glow + breathing) ====== */
.footer{
  position:relative; display:grid; place-items:center; padding:6px 0 8px; pointer-events:none;
}
.sig{
  pointer-events:auto;
  font-weight:800;
  padding:8px 16px; border-radius:999px; color:#0b0d12;
  background:linear-gradient(135deg,var(--ac1),var(--ac2));
  box-shadow:0 0 12px rgba(124,92,255,.55), 0 0 22px rgba(0,211,194,.45);
  animation:breath 3.2s ease-in-out infinite;
}
:root[data-theme="dark"] .sig{color:#0a0e14}
@keyframes breath{
  0%,100%{box-shadow:0 0 10px rgba(124,92,255,.5), 0 0 18px rgba(0,211,194,.38); transform:translateY(0) scale(1)}
  50%{box-shadow:0 0 18px rgba(124,92,255,.8), 0 0 30px rgba(0,211,194,.6); transform:translateY(-1px) scale(1.03)}
}

/* util */
.hint{color:var(--muted);font-size:.86rem}
.sep{height:2px}
</style>
</head>
<body>

<!-- Tabs (sin JS) -->
<input type="radio" name="tab" id="t-home" checked>
<input type="radio" name="tab" id="t-services">
<input type="radio" name="tab" id="t-clients">
<input type="radio" name="tab" id="t-farm">
<input type="radio" name="tab" id="t-acc">

<!-- ====== Sprite de √≠conos/brands ====== -->
<svg width="0" height="0" aria-hidden="true" style="position:absolute">
  <defs>
    <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#7c5cff"/><stop offset="100%" stop-color="#00d3c2"/>
    </linearGradient>
    <symbol id="klogo" viewBox="0 0 64 64">
      <circle cx="32" cy="32" r="30" fill="url(#g)" opacity=".14"/>
      <path d="M18 14h10v16l16-16h12L40 30l16 20H44L28 36v14H18V14z" fill="url(#g)"/>
    </symbol>

    <!-- Nav icons -->
    <symbol id="ico-home" viewBox="0 0 24 24"><path d="M3 10l9-7 9 7v9a2 2 0 0 1-2 2h-4v-7H9v7H5a2 2 0 0 1-2-2z" fill="none" stroke="currentColor" stroke-width="2"/></symbol>
    <symbol id="ico-tools" viewBox="0 0 24 24"><path d="M3 21l6-6M7 3l3 3-2 2 6 6 2-2 3 3M14 7l3-3" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></symbol>
    <symbol id="ico-users" viewBox="0 0 24 24"><path d="M7 14a4 4 0 1 1 4-4M3 21a6 6 0 0 1 12 0M17 11a3 3 0 1 1 6 0M15 21a6 6 0 0 1 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></symbol>
    <symbol id="ico-devices" viewBox="0 0 24 24"><rect x="3" y="4" width="14" height="12" rx="2" fill="none" stroke="currentColor" stroke-width="2"/><rect x="19" y="8" width="2" height="8" rx="1" fill="currentColor"/></symbol>
    <symbol id="ico-lock" viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="9" rx="2" fill="none" stroke="currentColor" stroke-width="2"/><path d="M7 11V8a5 5 0 0 1 10 0v3" fill="none" stroke="currentColor" stroke-width="2"/></symbol>

    <!-- IG verified (real badge simple) -->
    <symbol id="ig-verified" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="10" fill="#0095F6"/>
      <path d="M8.8 12.2l2.3 2.3 4.7-4.7" fill="none" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
    </symbol>

    <!-- Brands (minimal vector) -->
    <symbol id="logo-instagram" viewBox="0 0 24 24">
      <rect x="3" y="3" width="18" height="18" rx="5" fill="none" stroke="#E1306C" stroke-width="2"/>
      <circle cx="12" cy="12" r="4" fill="none" stroke="#E1306C" stroke-width="2"/>
      <circle cx="17" cy="7" r="1.2" fill="#E1306C"/>
    </symbol>
    <symbol id="logo-tiktok" viewBox="0 0 24 24">
      <path d="M10 4v9.2a3.8 3.8 0 1 1-2.8 6.2" fill="none" stroke="#69C9D0" stroke-width="2"/>
      <path d="M14 4c.5 2.3 2.2 4 5 4" fill="none" stroke="#ff0050" stroke-width="2"/>
    </symbol>
    <symbol id="logo-youtube" viewBox="0 0 24 24">
      <rect x="3" y="6" width="18" height="12" rx="3" fill="#FF0000"/>
      <path d="M10 9l6 3-6 3z" fill="#fff"/>
    </symbol>
    <symbol id="logo-threads" viewBox="0 0 24 24">
      <path d="M6 12c0-4 3-7 6-7s6 3 6 7-3 7-6 7c-2 0-3.5-1-3.5-2.5S9 14 12 14c2.5 0 3.8-1.2 3.8-3S14.5 8 12 8" fill="none" stroke="#fff" stroke-width="2"/>
    </symbol>
    <symbol id="logo-x" viewBox="0 0 24 24"><path d="M4 4l16 16M20 4L4 20" stroke="#fff" stroke-width="2"/></symbol>
    <symbol id="logo-facebook" viewBox="0 0 24 24"><path d="M14 8h3V5h-3c-2 0-3 .9-3 3v2H8v3h3v6h3v-6h3l1-3h-4V8c0-.7.3-1 1-1z" fill="#1877F2"/></symbol>
    <symbol id="logo-linkedin" viewBox="0 0 24 24"><rect x="3" y="8" width="4" height="12" fill="#0A66C2"/><circle cx="5" cy="5.5" r="2" fill="#0A66C2"/><rect x="9" y="8" width="12" height="12" rx="2" fill="none" stroke="#0A66C2" stroke-width="2"/></symbol>
    <symbol id="logo-spotify" viewBox="0 0 24 24"><circle cx="12" cy="12" r="9" fill="#1DB954"/><path d="M7 10c3-1 7-1 10 1M7 13c3-1 6-1 9 1M7 16c2-.5 4-.5 6 .5" stroke="#fff" stroke-width="2" fill="none"/></symbol>
    <symbol id="logo-telegram" viewBox="0 0 24 24"><path d="M21 3L3 11l6 2 2 6 3-4 4-10z" fill="#0088cc"/></symbol>
    <symbol id="logo-whatsapp" viewBox="0 0 24 24"><path d="M12 3a9 9 0 0 1 0 18 9.4 9.4 0 0 1-4-.9L5 21l.9-3.1A9.4 9.4 0 0 1 3 12 9 9 0 0 1 12 3z" fill="#25D366"/><path d="M9 8c0 3 3 6 5 6l1-1" stroke="#fff" stroke-width="2"/></symbol>
  </defs>
</svg>

<div class="app" id="app">
  <header class="top">
    <div class="brand">
      <div class="badge"><svg viewBox="0 0 64 64" width="20" height="20"><use href="#klogo"/></svg></div>
      <div class="word">KraveAI</div>
    </div>
    <div class="status"><span class="dot"></span><small id="status-text">Sin conexi√≥n</small></div>
    <button class="theme" id="themeBtn" title="Tema">üåì</button>
  </header>

  <main class="main">
    <div class="fit" id="fitRoot">
      <!-- ===== HERO ORB ===== -->
      <div class="hero section card">
        <div>
          <h1 class="h1">Redes sociales</h1>
          <p class="p">Domina todas tus redes con IA</p>
        </div>
        <div class="orb-wrap"><div class="orb" id="orb"></div></div>
      </div>

      <!-- ===== HOME ===== -->
      <section class="view section card" data-v="home">
        <div class="home">
          <!-- Lista de redes -->
          <div>
            <div class="hint" style="margin-bottom:6px;font-weight:800">Redes sociales</div>
            <div class="grid-social" id="socialGrid"></div>
          </div>

          <!-- Acciones r√°pidas -->
          <div class="actions">
            <div class="hint" style="margin-bottom:6px;font-weight:800">Acciones r√°pidas</div>
            <div class="row">
              <div class="input"><span>‚ûï</span><input id="quick" placeholder="Pega una URL o escribe una acci√≥n"></div>
              <button class="btn" id="quickGo">Enviar</button>
            </div>
            <div class="sep"></div>
            <div class="clients-bar" id="clientsBar">
              <!-- Clientes (2 columnas) -->
            </div>
          </div>
        </div>
      </section>

      <!-- ===== SERVICES ===== -->
      <section class="view section card" data-v="services">
        <div class="svc-head">
          <div class="svc-title">
            <div class="avatar"><svg id="svcLogo"><use href="#logo-instagram"/></svg></div>
            <div id="svcTitle">Instagram</div>
          </div>
          <button class="btn" id="backHome">Volver</button>
        </div>
        <div class="svc-grid" id="svcGrid"></div>

        <!-- Subvistas (ej. Instagram ‚Üí Comentarios) -->
        <div id="svcView"></div>
      </section>

      <!-- ===== CLIENTS ===== -->
      <section class="view section card" data-v="clients">
        <div class="hint" style="margin-bottom:6px;font-weight:800">Clientes recientes</div>
        <div class="clients-bar" id="clientsFull"></div>
      </section>

      <!-- ===== FARM ===== -->
      <section class="view section card" data-v="farm">
        <div class="svc-head"><div class="svc-title">Device Farm</div></div>
        <div class="farm" id="farmGrid"></div>
      </section>

      <!-- ===== ACCOUNTS ===== -->
      <section class="view section card" data-v="acc">
        <div class="svc-head"><div class="svc-title">Cuentas</div></div>
        <div class="hint">Login simulado. Integra tu backend cuando quieras.</div>
        <div class="form" style="margin-top:8px">
          <div class="input wide"><span>@</span><input id="accUser" placeholder="Usuario"></div>
          <div class="input wide"><span>üîí</span><input id="accPass" type="password" placeholder="Contrase√±a"></div>
          <div class="actions"><button class="btn" id="loginBtn">Iniciar sesi√≥n</button></div>
        </div>
      </section>
    </div>
  </main>

  <!-- Firma -->
  <footer class="footer"><div class="sig" id="sig">Created by Karmean G√≥mez</div></footer>

  <!-- Bottom nav -->
  <nav class="nav">
    <label class="tab" for="t-home"><svg><use href="#ico-home"/></svg><small>Inicio</small></label>
    <label class="tab" for="t-services"><svg><use href="#ico-tools"/></svg><small>Servicios</small></label>
    <label class="tab" for="t-clients"><svg><use href="#ico-users"/></svg><small>Clientes</small></label>
    <label class="tab" for="t-farm"><svg><use href="#ico-devices"/></svg><small>Farm</small></label>
    <label class="tab" for="t-acc"><svg><use href="#ico-lock"/></svg><small>Cuentas</small></label>
  </nav>
</div>

<script>
/* ============= Tema persistente ============= */
const root = document.documentElement;
const themeBtn = document.getElementById('themeBtn');
root.setAttribute('data-theme', localStorage.getItem('theme') || 'dark');
themeBtn.onclick = () => {
  const t = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
  root.setAttribute('data-theme', t); localStorage.setItem('theme', t);
};

/* ============= Health (solo indicador visual) ============= */
const statusText = document.getElementById('status-text');
statusText.textContent = 'Sin conexi√≥n';

/* ============= Fit-to-viewport (sin scroll) ============= */
const fitRoot = document.getElementById('fitRoot');
function fit(){
  // Escala el contenido si no cabe verticalmente
  const maxH = document.querySelector('.main').clientHeight - 6;
  const rect = fitRoot.getBoundingClientRect();
  const scale = Math.min(1, (maxH) / rect.height);
  fitRoot.style.transform = `scale(${scale}) translateZ(0)`;
}
new ResizeObserver(fit).observe(document.querySelector('.main'));
window.addEventListener('load', fit);
window.addEventListener('orientationchange', () => setTimeout(fit, 300));

/* ============= Redes (Home) ============= */
const networks = [
  {key:'instagram', label:'Instagram', logo:'#logo-instagram', services:['Comentarios','Likes','Seguidores','Vistas']},
  {key:'tiktok', label:'TikTok', logo:'#logo-tiktok', services:['Vistas','Likes','Seguidores']},
  {key:'youtube', label:'YouTube', logo:'#logo-youtube', services:['Vistas','Likes','Suscripciones','Comentarios']},
  {key:'threads', label:'Threads', logo:'#logo-threads', services:['Respuestas','Likes']},
  {key:'x', label:'X', logo:'#logo-x', services:['Likes','Reposts','Seguidores','Respuestas']},
  {key:'facebook', label:'Facebook', logo:'#logo-facebook', services:['Reacciones','Comentarios','Compartidos']},
  {key:'linkedin', label:'LinkedIn', logo:'#logo-linkedin', services:['Reacciones','Comentarios','Conexiones','Visitas']},
  {key:'spotify', label:'Spotify', logo:'#logo-spotify', services:['Streams','Saves']},
  {key:'telegram', label:'Telegram', logo:'#logo-telegram', services:['Mensajes','Miembros']},
  {key:'whatsapp', label:'WhatsApp', logo:'#logo-whatsapp', services:['Mensajes','Grupos','Respuestas']},
];
const socialGrid = document.getElementById('socialGrid');
socialGrid.innerHTML = networks.map(n => `
  <button class="btn-net" data-net="${n.key}">
    <span class="ico"><svg><use href="${n.logo}"></use></svg></span>${n.label}
  </button>`).join('');

/* Navega a Servicios con red seleccionada */
const svcTitle = document.getElementById('svcTitle');
const svcLogo  = document.getElementById('svcLogo');
const svcGrid  = document.getElementById('svcGrid');
const svcView  = document.getElementById('svcView');

function openServices(netKey){
  const n = networks.find(x=>x.key===netKey) || networks[0];
  document.getElementById('t-services').checked = true;
  svcTitle.textContent = n.label;
  svcLogo.setAttribute('href', n.logo);
  svcGrid.innerHTML = n.services.map(s=>`<button class="svc-btn" data-svc="${s}" data-net="${n.key}">${s}</button>`).join('');
  svcView.innerHTML = ''; // limpia subvista
  fit();
}
socialGrid.addEventListener('click', e=>{
  const b = e.target.closest('.btn-net'); if(!b) return;
  openServices(b.dataset.net);
});
document.getElementById('backHome').onclick = ()=>{ document.getElementById('t-home').checked = true; fit(); };

/* Subvistas de servicio (ejemplo completo: Instagram ‚Üí Comentarios) */
svcGrid.addEventListener('click', e=>{
  const b = e.target.closest('.svc-btn'); if(!b) return;
  const {svc, net} = b.dataset;
  if(net==='instagram' && svc==='Comentarios'){
    svcView.innerHTML = `
      <div class="form">
        <div class="input wide"><span>üîó</span><input id="ig_url" placeholder="URL del post (https://www.instagram.com/p/...)" required></div>
        <div class="input"><span>#</span><input id="ig_qty" type="number" min="1" max="100" value="30" placeholder="Cantidad"></div>
        <div class="input"><span>üéõÔ∏è</span><input id="ig_mode" value="auto" list="modos" placeholder="Modo"></div>
        <datalist id="modos"><option value="auto"><option value="personalizado"><option value="manual"></datalist>
        <div class="input wide"><span>üßë‚Äçüíº</span><input id="ig_apodo" placeholder="Apodo (opcional)"></div>
        <div class="input"><span>üéØ</span><input id="ig_estilo" placeholder="Estilo (fitness, sexy, etc)"></div>
        <div class="input"><span>üè∑Ô∏è</span><input id="ig_act" placeholder="Actividad (entrenador, etc)"></div>
        <div class="input wide"><span>üìù</span><input id="ig_ej" placeholder="Ejemplos (uno por l√≠nea)"></div>
        <div class="actions"><button class="btn" id="ig_send">Lanzar</button></div>
      </div>
      <div class="hint" id="ig_status" style="margin-top:4px">‚Äî</div>
    `;
    // wire
    document.getElementById('ig_send').onclick = async ()=>{
      const API_URL = "https://api.kraveapi.xyz";
      const payload = {
        url: document.getElementById('ig_url').value.trim(),
        cantidad: document.getElementById('ig_qty').value,
        modo: document.getElementById('ig_mode').value,
        apodo: document.getElementById('ig_apodo').value,
        estilo: document.getElementById('ig_estilo').value,
        actividad: document.getElementById('ig_act').value,
        ejemplos: document.getElementById('ig_ej').value
      };
      const st = document.getElementById('ig_status');
      if(!payload.url){ st.textContent='‚ùå Falta URL'; return; }
      try{
        st.textContent='Enviando‚Ä¶';
        const r=await fetch(`${API_URL}/instagram/comentarios`,{
          method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',
          body:JSON.stringify(payload)
        });
        const d=await r.json().catch(()=>({}));
        if(r.ok){ st.textContent='‚úÖ Comentarios en proceso'; } else { throw new Error(d.mensaje||'Error en comentarios'); }
      }catch(err){ st.textContent='‚ùå '+err.message; }
    };
  } else {
    // placeholder limpio sin datos falsos
    svcView.innerHTML = `<div class="hint" style="margin-top:8px">Seleccionaste <b>${svc}</b> de <b>${net}</b>. Integra aqu√≠ tu flujo.</div>`;
  }
  fit();
});

/* ============= Quick ============= */
document.getElementById('quickGo').onclick = ()=>{
  const v = (document.getElementById('quick').value||'').trim();
  if(!v) return;
  alert('Automatizando: '+v);
  document.getElementById('quick').value='';
};

/* ============= Clientes ============= */
const clients = [
  {handle:'@aaronmercury',  network:'Instagram', avatar:'' , verified:true},
  {handle:'@televisadigital', network:'Instagram', avatar:'', verified:true},
  {handle:'@joscanela',     network:'Instagram', avatar:'' , verified:true},
  {handle:'@jimenagallegotv', network:'Instagram', avatar:'', verified:true},
];
function clientHTML(c){
  return `<div class="client">
    <div class="avatar">
      ${c.avatar ? `<img src="${c.avatar}" alt="" style="width:100%;height:100%;object-fit:cover">`
                  : `<svg><use href="#logo-instagram"/></svg>`}
    </div>
    <div style="display:flex;flex-direction:column">
      <div style="display:flex;align-items:center;gap:6px">
        <span class="handle">${c.handle}</span>
        ${c.verified ? `<svg class="ig-verify"><use href="#ig-verified"/></svg>`:''}
      </div>
      <div class="sub">${c.network}</div>
    </div>
  </div>`;
}
document.getElementById('clientsBar').innerHTML = clients.slice(0,2).map(clientHTML).join('');
document.getElementById('clientsFull').innerHTML = clients.map(clientHTML).join('');

/* ============= Farm ============= */
const farmDefault=[
  {id:'d1',name:'iPhone 14 Pro',os:'iOS',ip:'10.0.0.8'},
  {id:'d2',name:'Galaxy S23',os:'Android',ip:'10.0.0.9'},
  {id:'d3',name:'iPhone 13',os:'iOS',ip:'10.0.0.10'},
  {id:'d4',name:'Pixel 8',os:'Android',ip:'10.0.0.11'},
];
const farmGrid=document.getElementById('farmGrid');
function renderFarm(){
  farmGrid.innerHTML = farmDefault.map(d=>{
    const src = localStorage.getItem('stream:'+d.id)||'';
    const media = src ? (src.endsWith('.mjpg')||src.endsWith('.mjpeg')?`<img src="${src}">`: src.endsWith('.m3u8')?`<video src="${src}" autoplay muted playsinline></video>`:`<iframe src="${src}" allow="autoplay; encrypted-media" allowfullscreen></iframe>`) : '<div class="placeholder"></div>';
    return `<div class="card dev">
      <div class="dev-head"><div><strong>${d.name}</strong> ¬∑ ${d.os}</div><div class="hint">${d.ip}</div></div>
      <div class="screen">${media}</div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn" data-set="${d.id}">Asignar stream</button>
        <button class="btn" style="background:transparent;border:1px solid var(--line);color:var(--text)" data-clear="${d.id}">Limpiar</button>
      </div>
    </div>`;
  }).join('');
}
renderFarm();
farmGrid.addEventListener('click',(e)=>{
  const b=e.target.closest('button'); if(!b) return;
  if(b.dataset.set){
    const id=b.dataset.set;
    const cur=localStorage.getItem('stream:'+id)||'';
    const url=prompt('URL stream (HLS .m3u8, MJPEG .mjpg, o https):',cur);
    if(url!==null){ localStorage.setItem('stream:'+id,url.trim()); renderFarm(); }
  }
  if(b.dataset.clear){ localStorage.removeItem('stream:'+b.dataset.clear); renderFarm(); }
});

/* ============= Navegaci√≥n directa a servicios desde barra inferior ============= */
document.querySelector('label[for="t-services"]').addEventListener('click', ()=>{
  // Si vienes desde Home sin seleccionar red, abre Instagram por defecto
  if(!svcGrid.children.length) openServices('instagram');
});

/* Primera carga: orb centrado y ajuste */
fit();
</script>
</body>
</html>