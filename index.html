<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#121212">
  <title>KraveAI - Panel de Control</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* [El estilo CSS permanece igual, omitido por brevedad. Copia el CSS original aquí si lo necesitas] */
  </style>
</head>
<body>
  <div class="app-header">
    <div class="logo">
      <i class="fas fa-brain"></i>
      <span>KraveAI</span>
    </div>
    <div class="user-avatar">KG</div>
    <div class="refresh-btn" id="refresh-btn">
      <i class="fas fa-sync-alt"></i>
    </div>
  </div>

  <div class="app-content">
    <div class="section">
      <div class="section-title">
        <i class="fas fa-hashtag"></i> Redes sociales
      </div>
      <div class="section-subtitle">Domina todas tus redes con IA</div>

      <div class="social-grid">
        <a href="#" class="social-item" id="instagram-link">
          <div class="social-icon" style="background: rgba(225, 48, 108, 0.15);">
            <i class="fab fa-instagram" style="color: #E1306C;"></i>
          </div>
          <div class="social-name">Instagram</div>
        </a>
        <a href="#" class="social-item" id="tiktok-link">
          <div class="social-icon" style="background: rgba(105, 201, 208, 0.15);">
            <i class="fab fa-tiktok" style="color: #69C9D0;"></i>
          </div>
          <div class="social-name">Tiktok</div>
        </a>
        <a href="#" class="social-item" id="youtube-link">
          <div class="social-icon" style="background: rgba(255, 0, 0, 0.15);">
            <i class="fab fa-youtube" style="color: #FF0000;"></i>
          </div>
          <div class="social-name">YouTube</div>
        </a>
        <a href="#" class="social-item" id="spotify-link">
          <div class="social-icon" style="background: rgba(29, 185, 84, 0.15);">
            <i class="fab fa-spotify" style="color: #1DB954;"></i>
          </div>
          <div class="social-name">Spotify</div>
        </a>
        <a href="#" class="social-item" id="threads-link">
          <div class="social-icon" style="background: rgba(255, 255, 255, 0.15);">
            <i class="fab fa-threads" style="color: #fff;"></i>
          </div>
          <div class="social-name">Threads</div>
        </a>
      </div>

      <button class="beast-mode pulse">
        <i class="fas fa-paw"></i> Modo Bestia
      </button>

      <div class="status-indicator">
        <div class="status-dot" id="system-status-dot"></div>
        <span id="system-status-text">Conectando al backend...</span>
      </div>
    </div>

    <div class="section">
      <div class="section-title">
        <i class="fas fa-users"></i> Clientes recientes
      </div>

      <div class="clients-list">
        <div class="client-item">
          <div class="client-icon" style="background: rgba(225, 48, 108, 0.15);">
            <i class="fab fa-instagram" style="color: #E1306C;"></i>
          </div>
          <div class="client-info">
            <div class="client-name">arianaoficial</div>
            <div class="client-platform">Instagram</div>
          </div>
        </div>

        <div class="client-item">
          <div class="client-icon" style="background: rgba(255, 0, 0, 0.15);">
            <i class="fab fa-youtube" style="color: #FF0000;"></i>
          </div>
          <div class="client-info">
            <div class="client-name">plenkay</div>
            <div class="client-platform">YouTube</div>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
      <div class="section-title">
        <i class="fas fa-bolt"></i> Automatización
      </div>

      <div class="automation-box">
        <input type="text" placeholder="¿Qué quieres automatizar hoy?" id="automation-input">
        <button class="send-button" id="send-btn">
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
    </div>

    <div class="created-by">
      Created by Karmean Gómez
    </div>
  </div>

  <!-- Instagram Panel -->
  <div id="instagram-panel">
    <div class="back-button" id="volver-inicio">
      <i class="fas fa-arrow-left"></i> Volver
    </div>

    <div class="app-content">
      <div class="section">
        <div class="section-title">
          <i class="fab fa-instagram" style="color: #E1306C;"></i> Panel de Instagram
        </div>
        <div class="section-subtitle">Elige qué deseas automatizar</div>

        <div class="instagram-grid">
          <div class="instagram-item">
            <div class="instagram-icon">👥</div>
            <div class="instagram-name">Clientes</div>
          </div>
          <div class="instagram-item">
            <div class="instagram-icon">🔧</div>
            <div class="instagram-name">Servicios</div>
          </div>
          <div class="instagram-item">
            <div class="instagram-icon">❤️</div>
            <div class="instagram-name">Likes</div>
          </div>
          <div class="instagram-item">
            <div class="instagram-icon">➕</div>
            <div class="instagram-name">Seguidores</div>
          </div>
          <div class="instagram-item">
            <div class="instagram-icon">👁️</div>
            <div class="instagram-name">Vistas</div>
          </div>
          <div class="instagram-item" id="comments-link">
            <div class="instagram-icon">💬</div>
            <div class="instagram-name">Comentarios</div>
          </div>
          <div class="instagram-item">
            <div class="instagram-icon">🔁</div>
            <div class="instagram-name">Compartidos</div>
          </div>
          <div class="instagram-item" id="crear-cuentas-link">
            <div class="instagram-icon">➕</div>
            <div class="instagram-name">Crear cuentas</div>
          </div>
          <div class="instagram-item" id="login-link">
            <div class="instagram-icon">🔐</div>
            <div class="instagram-name">Login</div>
          </div>
          <div class="instagram-item" id="ver-cuentas-link">
            <div class="instagram-icon">📋</div>
            <div class="instagram-name">Ver cuentas generadas</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Create Accounts Panel -->
  <div id="create-accounts-panel">
    <div class="back-button" id="volver-instagram">
      <i class="fas fa-arrow-left"></i> Volver
    </div>

    <div class="app-content">
      <div class="section">
        <div class="section-title">
          <i class="fas fa-user-plus"></i> Crear nuevas cuentas
        </div>
        <div class="section-subtitle">
          Sistema automatizado para creación de cuentas de Instagram
        </div>

        <div class="create-form">
          <div class="form-group">
            <label class="form-label">Número de cuentas a crear</label>
            <input type="number" id="account-count" class="form-input" value="5" min="1" max="100">
          </div>

          <div class="form-actions">
            <button class="form-btn cancel-btn" id="cancel-btn">
              <i class="fas fa-times"></i> Cancelar
            </button>
            <button class="form-btn submit-btn" id="create-btn">
              <i class="fas fa-play"></i> Iniciar creación
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Login Panel -->
  <div id="login-panel">
    <div class="back-button" id="volver-login">
      <i class="fas fa-arrow-left"></i> Volver
    </div>

    <div class="app-content">
      <div class="section">
        <div class="section-title">
          <i class="fas fa-sign-in-alt"></i> Login
        </div>
        <div class="section-subtitle">Inicia sesión con tus cuentas</div>

        <form id="loginForm" class="create-form">
          <div class="form-group">
            <label class="form-label">Usuario</label>
            <input type="text" name="username" class="form-input" placeholder="Ingresa tu usuario" required>
          </div>
          <div class="form-group">
            <label class="form-label">Contraseña</label>
            <input type="password" name="password" class="form-input" placeholder="Ingresa tu contraseña" required>
          </div>
          <div class="form-actions">
            <button type="submit" class="form-btn submit-btn">Iniciar Sesión</button>
          </div>
        </form>

        <div class="section-title" style="margin-top: 20px;">
          <i class="fas fa-user-plus"></i> Agregar Cuenta Manual
        </div>
        <form id="addAccountForm" class="create-form">
          <div class="form-group">
            <label class="form-label">Usuario</label>
            <input type="text" name="manualUsername" class="form-input" placeholder="Ingresa el usuario" required>
          </div>
          <div class="form-group">
            <label class="form-label">Contraseña</label>
            <input type="password" name="manualPassword" class="form-input" placeholder="Ingresa la contraseña" required>
          </div>
          <div class="form-actions">
            <button type="submit" class="form-btn submit-btn">Guardar Cuenta</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Comments Panel -->
  <div id="comments-panel">
    <div class="back-button" id="volver-inicio-comments">
      <i class="fas fa-arrow-left"></i> Volver
    </div>
    <div class="app-content">
      <div class="section">
        <div class="section-title">
          <i class="fas fa-comments"></i> Automatización de Comentarios
        </div>
        <div class="section-subtitle">
          Configura y lanza comentarios masivos en Instagram.
        </div>
        <form id="formComentarios" class="create-form">
          <div class="form-group">
            <label class="form-label">URL del Post</label>
            <input type="text" name="url" class="form-input" placeholder="https://www.instagram.com/p/CXXXXX/" required>
          </div>
          <div class="form-group">
            <label class="form-label">Cantidad de Comentarios</label>
            <input type="number" name="cantidad" class="form-input" value="30" min="1" max="100" required>
          </div>
          <div class="form-group">
            <label class="form-label">Modo</label>
            <select name="modo" class="form-input">
              <option value="auto">Auto (basado en imagen)</option>
              <option value="personalizado">Personalizado (con estilo)</option>
              <option value="manual">Manual (pegar comentarios)</option>
            </select>
          </div>
          <div class="form-group" id="manualSection" style="display: none;">
            <label class="form-label">Comentarios Manuales</label>
            <textarea name="comentarios" class="form-input" placeholder="Pega un comentario por línea" rows="4"></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">Apodo (Opcional)</label>
            <input type="text" name="apodo" class="form-input" placeholder="Ej: Gera">
          </div>
          <div class="form-group">
            <label class="form-label">Estilo</label>
            <input type="text" name="estilo" class="form-input" placeholder="Ej: fitness, sexy, guapo">
          </div>
          <div class="form-group">
            <label class="form-label">Actividad</label>
            <input type="text" name="actividad" class="form-input" placeholder="Ej: entrenador personal">
          </div>
          <div class="form-group">
            <label class="form-label">Ejemplos de Comentarios</label>
            <textarea name="ejemplos" class="form-input" placeholder="Un comentario por línea" rows="4"></textarea>
          </div>
          <div class="form-actions">
            <button type="submit" class="form-btn submit-btn">Lanzar Comentarios</button>
            <button type="button" class="form-btn cancel-btn" id="cancelComment">Cancelar</button>
          </div>
        </form>
        <div id="commentStatus" class="status-indicator" style="display: none;">
          <div class="status-dot"></div>
          <span id="commentMessage"></span>
        </div>
      </div>
    </div>
  </div>

  <div class="nav-bar">
    <a href="#" class="nav-item active">
      <i class="fas fa-home"></i>
      <span>Inicio</span>
    </a>
    <a href="#" class="nav-item">
      <i class="fas fa-chart-line"></i>
      <span>Analítica</span>
    </a>
    <a href="#" class="nav-item">
      <i class="fas fa-cogs"></i>
      <span>Ajustes</span>
    </a>
    <a href="#" class="nav-item">
      <i class="fas fa-user"></i>
      <span>Perfil</span>
    </a>
  </div>

  <div class="notification" id="notification">
    <i class="fas fa-check-circle"></i> <span id="notification-text"></span>
  </div>

  <script>
    // Elementos DOM para navegación
    const instagramLink = document.getElementById('instagram-link');
    const volverInicio = document.getElementById('volver-inicio');
    const crearCuentasLink = document.getElementById('crear-cuentas-link');
    const volverInstagram = document.getElementById('volver-instagram');
    const loginLink = document.getElementById('login-link');
    const volverLogin = document.getElementById('volver-login');
    const commentsLink = document.getElementById('comments-link');
    const volverInicioComments = document.getElementById('volver-inicio-comments');
    const instagramPanel = document.getElementById('instagram-panel');
    const createAccountsPanel = document.getElementById('create-accounts-panel');
    const loginPanel = document.getElementById('login-panel');
    const commentsPanel = document.getElementById('comments-panel');
    const notification = document.getElementById('notification');
    const notificationText = document.getElementById('notification-text');
    const automationInput = document.getElementById('automation-input');
    const sendBtn = document.getElementById('send-btn');
    const refreshBtn = document.getElementById('refresh-btn');
    const beastModeBtn = document.querySelector('.beast-mode');
    const statusDot = document.getElementById('system-status-dot');
    const statusText = document.getElementById('system-status-text');

    // Mostrar notificación
    function showNotification(message) {
      notificationText.textContent = message;
      notification.classList.add('show');
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    // Conexión al backend
    async function checkBackendConnection() {
      try {
        const response = await fetch('http://localhost:3000/status', {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
          },
        });
        if (response.ok) {
          const data = await response.json();
          statusDot.style.background = var(--success);
          statusText.textContent = `Conectado al backend - ${data.message || 'OK'}`;
        } else {
          throw new Error('Respuesta no exitosa del backend');
        }
      } catch (error) {
        statusDot.style.background = var(--error);
        statusText.textContent = 'Error: No se pudo conectar al backend';
        console.error('Error al conectar al backend:', error);
      }
    }

    // Navegación entre paneles
    instagramLink.addEventListener('click', function(e) {
      e.preventDefault();
      instagramPanel.classList.add('active');
    });

    volverInicio.addEventListener('click', function(e) {
      e.preventDefault();
      instagramPanel.classList.remove('active');
    });

    crearCuentasLink.addEventListener('click', function(e) {
      e.preventDefault();
      createAccountsPanel.classList.add('active');
      instagramPanel.classList.remove('active');
    });

    volverInstagram.addEventListener('click', function(e) {
      e.preventDefault();
      createAccountsPanel.classList.remove('active');
      instagramPanel.classList.add('active');
    });

    loginLink.addEventListener('click', function(e) {
      e.preventDefault();
      loginPanel.classList.add('active');
      instagramPanel.classList.remove('active');
    });

    volverLogin.addEventListener('click', function(e) {
      e.preventDefault();
      loginPanel.classList.remove('active');
      instagramPanel.classList.add('active');
    });

    commentsLink.addEventListener('click', function(e) {
      e.preventDefault();
      commentsPanel.classList.add('active');
      instagramPanel.classList.remove('active');
    });

    volverInicioComments.addEventListener('click', function(e) {
      e.preventDefault();
      commentsPanel.classList.remove('active');
      instagramPanel.classList.add('active');
    });

    // Botón de enviar
    sendBtn.addEventListener('click', function() {
      if (automationInput.value.trim() !== '') {
        showNotification(`Automatizando: "${automationInput.value}"`);
        automationInput.value = '';
      }
    });

    // Botón de refresh
    refreshBtn.addEventListener('click', function() {
      this.style.animation = 'rotate 1s linear';
      checkBackendConnection(); // Reintenta la conexión al refrescar
      setTimeout(() => {
        this.style.animation = '';
      }, 1000);
    });

    // Botón Modo Bestia
    beastModeBtn.addEventListener('click', function() {
      this.innerHTML = '<i class="fas fa-paw"></i> ¡Activando Modo Bestia!';
      this.style.background = 'linear-gradient(135deg, #ff8c00, #ff0080)';
      setTimeout(() => {
        this.innerHTML = '<i class="fas fa-paw"></i> ¡Modo Bestia Activado!';
        this.style.background = 'linear-gradient(135deg, #00c9b7, #6e44ff)';
        showNotification('Modo Bestia activado');
      }, 1500);
    });

    // Inicialización
    document.addEventListener('DOMContentLoaded', () => {
      showNotification('KraveAI listo - ¡Bienvenido!');
      checkBackendConnection(); // Intenta conectar al cargar la página
    });
  </script>
</body>
</html>