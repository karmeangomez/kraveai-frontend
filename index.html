<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#121212">
  <title>KraveAI - Panel de Control</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- ‚Ä¶ tu CSS original ‚Ä¶ -->
  <style>
    /* Copia aqu√≠ el <style> que ya tienes */
    /* (sin cambios) */
  </style>
</head>

<body>
  <!-- Header -->
  <div class="app-header">
    <div class="logo"><i class="fas fa-brain"></i><span>KraveAI</span></div>
    <div class="user-avatar">KG</div>
    <div class="refresh-btn" id="refresh-btn"><i class="fas fa-sync-alt"></i></div>
  </div>

  <!-- Main -->
  <div class="app-content">
    <div class="section">
      <div class="section-title"><i class="fas fa-hashtag"></i> Redes sociales</div>
      <div class="section-subtitle">Domina todas tus redes con IA</div>

      <div class="social-grid">
        <a href="#" class="social-item" id="instagram-link">
          <i class="fab fa-instagram" style="color:#E1306C;"></i>
          <span>Instagram</span>
        </a>
        <!-- ‚Ä¶ resto de redes ‚Ä¶ -->
      </div>

      <button class="beast-mode"><i class="fas fa-paw"></i> Modo Bestia</button>

      <div class="status-indicator">
        <div class="status-dot" id="system-status-dot"></div>
        <span id="system-status-text">Conectando al backend...</span>
        <div id="active-accounts" style="margin-top:6px;font-size:0.85rem;color:var(--gray);"></div>
      </div>
    </div>
  </div>

  <!-- Login Panel -->
  <div id="login-panel">
    <div class="back-button" id="volver-login"><i class="fas fa-arrow-left"></i> Volver</div>
    <div class="app-content">
      <div class="section">
        <div class="section-title"><i class="fas fa-key"></i> Gesti√≥n de Sesiones</div>
        <div class="section-subtitle">Controla tus inicios de sesi√≥n en Instagram</div>

        <!-- LOGIN -->
        <div class="create-form">
          <div class="form-group">
            <label class="form-label">Usuario de Instagram</label>
            <input type="text" id="login-username" class="form-input" placeholder="Usuario de Instagram">
          </div>

          <div class="form-group">
            <label class="form-label">Contrase√±a</label>
            <div style="position:relative;">
              <input type="password" id="login-password" class="form-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
              <span id="togglePassword" style="position:absolute;right:15px;top:50%;transform:translateY(-50%);cursor:pointer;color:var(--gray);">üëÅÔ∏è</span>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Estado de sesi√≥n</label>
            <div class="status-indicator-panel" id="session-status">
              <div class="status-dot-panel"></div>
              <span id="session-status-text">No hay sesi√≥n activa</span>
            </div>
          </div>

          <div class="form-actions">
            <button class="form-btn submit-btn" id="login-btn"><i class="fas fa-sign-in-alt"></i> Iniciar sesi√≥n</button>
            <button class="form-btn cancel-btn" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Cerrar sesi√≥n</button>
          </div>
        </div>

        <!-- AGREGAR CUENTA MANUAL -->
        <div class="create-form" style="margin-top:20px;">
          <div class="form-title"><i class="fas fa-user-plus"></i> Agregar Cuenta Manual</div>
          <div class="form-group">
            <label class="form-label">Usuario</label>
            <input type="text" id="manual-username" class="form-input" placeholder="Ingresa el usuario" required>
          </div>
          <div class="form-group">
            <label class="form-label">Contrase√±a</label>
            <input type="password" id="manual-password" class="form-input" placeholder="Ingresa la contrase√±a" required>
          </div>
          <div class="form-actions">
            <button class="form-btn submit-btn" id="add-account-btn"><i class="fas fa-save"></i> Guardar Cuenta</button>
          </div>
        </div>

        <!-- BUSCAR USUARIO -->
        <div style="margin-top:30px;">
          <div class="form-group">
            <label class="form-label">Buscar usuario de Instagram</label>
            <input type="text" id="username-search" class="form-input" placeholder="@usuario">
          </div>
          <button class="form-btn submit-btn" id="search-user-btn" style="width:100%;"><i class="fas fa-search"></i> Buscar usuario</button>
          <div id="user-result" class="user-result" style="display:none;">
            <!-- ‚Ä¶ aqu√≠ se llenar√° din√°micamente ‚Ä¶ -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Navegaci√≥n inferior -->
  <div class="nav-bar">
    <a href="#" class="nav-item active"><i class="fas fa-home"></i><span>Inicio</span></a>
    <a href="#" class="nav-item"><i class="fas fa-chart-line"></i><span>Anal√≠tica</span></a>
    <a href="#" class="nav-item"><i class="fas fa-cogs"></i><span>Ajustes</span></a>
    <a href="#" class="nav-item"><i class="fas fa-user"></i><span>Perfil</span></a>
  </div>

  <!-- Notificaciones -->
  <div class="notification" id="notification"><i class="fas fa-check-circle"></i> <span id="notification-text"></span></div>

  <script>
    const API_URL = "https://api.kraveapi.xyz";

    // --- Peque√±os extras ---
    // 1. Toggle contrase√±a
    document.getElementById('togglePassword').addEventListener('click', () => {
      const pwd = document.getElementById('login-password');
      pwd.type = pwd.type === 'password' ? 'text' : 'password';
    });

    // 2. Ocultar login-panel si ya est√° logueado
    async function checkSessionStatus() {
      try {
        const res = await fetch(`${API_URL}/health`);
        const data = await res.json();
        // Muestra cuentas activas
        document.getElementById('active-accounts').textContent =
          (data.accounts?.length ? 'Cuentas: ' + data.accounts.join(', ') : 'Sin cuentas activas');

        if (data.accounts?.includes('krave')) {
          // Si ya est√° conectado, cierra el panel y va directo al panel de Instagram
          document.getElementById('login-panel').classList.remove('active');
          document.getElementById('instagram-panel').classList.add('active');
        }
      } catch {}
    }

    // Llamar al cargar
    document.addEventListener('DOMContentLoaded', checkSessionStatus);

    // --- Resto de tu JS original sin cambios ---
    // (aqu√≠ pegas tu bloque de JS que ya tienes)
  </script>
</body>
</html>
