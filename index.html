<!DOCTYPE html>
<html lang="es" data-theme="system">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no">
<title>KraveAI — Panel</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0b0d12">
<style>
/* ================= TOKENS ================= */
:root{
  --bg:#0b0f16; --elev:#0f141d; --card:#101827; --text:#eaf0f7; --muted:#8f9bb0; --line:#1c2738;
  --ok:#23c463; --err:#ef4444;
  --brand1:#7c5cff; --brand2:#22d3ee;
  --r:16px; --gap:12px; --shadow:0 18px 48px rgba(0,0,0,.32);
}
[data-theme="light"]{
  --bg:#f7f9fc; --elev:#ffffff; --card:#ffffff; --text:#0f172a; --muted:#667389; --line:#e6ebf3;
  --shadow:0 16px 36px rgba(0,0,0,.08);
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:15px/1.45 system-ui,-apple-system,"SF Pro Text",Inter,Roboto}
.app{min-height:100svh;display:grid;grid-template-rows:auto 1fr auto}

/* ================= TOP ================= */
.top{position:sticky;top:0;z-index:40;display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:12px;padding:10px max(14px,env(safe-area-inset-left)) 8px max(14px,env(safe-area-inset-right));background:color-mix(in oklab,var(--elev) 92%, transparent);border-bottom:1px solid var(--line);backdrop-filter:saturate(1.08) blur(12px)}
.brand{display:flex;align-items:center;gap:10px}
.badge{width:36px;height:36px;border-radius:12px;background:conic-gradient(from 210deg,#22d3ee,#7c5cff,#22d3ee);box-shadow:0 10px 22px rgba(124,92,255,.28),0 8px 16px rgba(34,211,238,.18)}
.word{font-weight:900;letter-spacing:.14em}
.status{justify-self:center;display:flex;align-items:center;gap:8px;color:var(--muted)}
.status .dot{width:8px;height:8px;border-radius:50%;background:#888}
.tog{width:36px;height:36px;border:1px solid var(--line);border-radius:12px;background:rgba(255,255,255,.05);display:grid;place-items:center;cursor:pointer}
.icon-moon{display:none}
[data-theme="light"] .icon-sun{display:none}
[data-theme="light"] .icon-moon{display:block}

/* ================= NAV ================= */
.nav{position:sticky;bottom:0;z-index:35;display:grid;grid-template-columns:repeat(4,1fr);gap:8px;padding:8px max(12px,env(safe-area-inset-left)) calc(8px + env(safe-area-inset-bottom)) max(12px,env(safe-area-inset-right));background:color-mix(in oklab,var(--elev) 92%, transparent);border-top:1px solid var(--line);backdrop-filter:saturate(1.08) blur(12px)}
.tab{display:flex;flex-direction:column;align-items:center;gap:4px;padding:10px;border-radius:12px;color:var(--muted);border:1px solid transparent;cursor:pointer}
.tab small{font-size:.74rem}
input[name="tab"]{position:absolute;opacity:0;pointer-events:none}
#t-home:checked ~ .app .nav label[for="t-home"],
#t-svc:checked ~ .app .nav label[for="t-svc"],
#t-clients:checked ~ .app .nav label[for="t-clients"],
#t-farm:checked ~ .app .nav label[for="t-farm"]{color:var(--text);background:rgba(255,255,255,.06);border-color:var(--line)}

/* ================= VIEWS ================= */
.main{height:calc(100svh - 56px - 64px - env(safe-area-inset-top) - env(safe-area-inset-bottom));overflow:auto}
.view{display:none;animation:fade .16s ease}
@keyframes fade{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
#t-home:checked ~ .app .view[data-tab="home"],
#t-svc:checked ~ .app .view[data-tab="svc"],
#t-clients:checked ~ .app .view[data-tab="clients"],
#t-farm:checked ~ .app .view[data-tab="farm"]{display:block}
.container{max-width:1100px;margin:0 auto;padding:14px}

/* ================= HOME RE-DESIGN ================= */
/* Hero de 2 columnas: texto+grid a la izquierda, ORB centrado a la derecha */
.hero{
  display:grid;
  grid-template-columns: 1.2fr .8fr; /* orb gana espacio sin dejar huecos */
  gap: clamp(12px, 3vw, 28px);
  align-items:center;
  min-height: clamp(360px, 52vh, 520px); /* ocupa pantalla */
  margin-bottom: clamp(12px, 2vw, 20px);
  position:relative;
}
.h1{font-size:clamp(26px,6vw,36px);font-weight:900;margin:4px 0 6px}
.sub{color:var(--muted);margin-bottom:16px}

/* Orb centrado con halo vivo */
.orb-stage{position:relative;display:grid;place-items:center}
.orb{
  width: min(64vw, 380px);
  height: min(64vw, 380px);
  border-radius:50%;
  background:
    radial-gradient(40% 40% at 28% 32%, rgba(124,92,255,.9) 0%, transparent 60%),
    radial-gradient(45% 55% at 70% 65%, rgba(34,211,238,.9) 0%, transparent 70%),
    radial-gradient(30% 30% at 50% 50%, rgba(110,231,183,.5) 0%, transparent 75%),
    #0b1020;
  box-shadow: 0 40px 90px rgba(34,211,238,.25), 0 16px 36px rgba(124,92,255,.22);
  animation: orbSpin 18s linear infinite;
  position:relative;
}
.orb::before{
  content:""; position:absolute; inset:-10px; border-radius:50%;
  background: conic-gradient(from 0deg, #22d3ee, #7c5cff, #22d3ee);
  filter: blur(10px); opacity:.55; animation: orbPulse 4.2s ease-in-out infinite;
}
@keyframes orbSpin{to{transform:rotate(360deg)}}
@keyframes orbPulse{50%{opacity:.28; transform:scale(1.03)}}

/* Grid de redes en pastillas que LLENA el área */
.networks{
  display:grid; gap:12px;
  grid-template-columns: repeat(auto-fill, minmax(210px,1fr));
}
.pill{
  display:flex;align-items:center;gap:10px;
  padding:12px 14px; background:var(--card); border:1px solid var(--line); border-radius:14px;
  box-shadow:var(--shadow); cursor:pointer; transition:transform .12s ease, box-shadow .2s ease
}
.pill:hover{transform:translateY(-2px);box-shadow:0 16px 30px rgba(0,0,0,.18)}
.pico{width:24px;height:24px;display:grid;place-items:center;border-radius:8px;background:rgba(255,255,255,.06)}
.plab{font-weight:800}

/* Clientes */
.section-title{font-weight:900;margin:8px 0}
.clients{display:grid;gap:10px;margin-top:8px}
.client{display:flex;align-items:center;gap:12px;padding:12px 14px;background:var(--card);border:1px solid var(--line);border-radius:14px}
.avatar{position:relative;width:38px;height:38px;border-radius:50%;overflow:hidden;background:radial-gradient(circle at 60% 110%,#feda75 0,#d62976 25%,#962fbf 50%,#4f5bd5 75%)}
.avatar img{width:100%;height:100%;object-fit:cover}
.tick{position:absolute;right:-3px;bottom:-3px;width:18px;height:18px;background:#0095F6;color:#fff;border-radius:50%;display:grid;place-items:center;border:2px solid var(--card);font-size:12px;line-height:1}
.handle{font-weight:800}
.platform{color:var(--muted);font-size:.9rem;margin-left:6px}
.quick{margin-top:10px;display:flex;align-items:center;gap:8px;background:var(--card);border:1px solid var(--line);border-radius:14px;padding:10px 10px 10px 12px}
.quick input{flex:1;background:transparent;border:0;outline:none;color:var(--text);font-size:1rem}
.btn{border:1px solid var(--line);background:linear-gradient(135deg,#7c5cff,#22d3ee);color:#0b0d13;padding:10px 14px;border-radius:12px;font-weight:900;cursor:pointer}

/* Farm (mantengo tu estilo) */
.farm-grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
.dev{display:grid;gap:8px;background:var(--card);border:1px solid var(--line);border-radius:16px;padding:12px}
.dev-head{display:flex;align-items:center;justify-content:space-between;gap:8px;font-size:.94rem}
.chips{display:flex;gap:6px;flex-wrap:wrap}
.chip{padding:6px 8px;border:1px solid var(--line);border-radius:999px;background:rgba(255,255,255,.04);font-size:.78rem}
.chip[data-live="1"]{background:rgba(34,197,94,.12);color:#22c55e;border-color:#22c55e}
.screen{border:1px solid var(--line);border-radius:14px;overflow:hidden;background:#000;height:220px;position:relative}
.screen iframe,.screen video,.screen img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
.screen .placeholder{position:absolute;inset:0;background:radial-gradient(120% 80% at 10% 10%, rgba(124,92,255,.25), transparent 60%),radial-gradient(120% 80% at 90% 90%, rgba(0,211,194,.18), transparent 60%),#000}
.dev-actions{display:flex;gap:8px;flex-wrap:wrap}
.btn-outline{border:1px solid var(--line);background:transparent;color:var(--text);padding:8px 10px;border-radius:10px;cursor:pointer}

/* Crédito brillante */
.credit{position:fixed;right:14px;bottom:calc(64px + env(safe-area-inset-bottom) + 10px);z-index:50;font-size:.86rem;color:var(--text);background:linear-gradient(180deg,color-mix(in oklab,var(--elev) 96%, transparent),color-mix(in oklab,var(--elev) 98%, transparent));border:1px solid var(--line);border-radius:999px;padding:8px 12px;box-shadow:0 0 18px rgba(124,92,255,.58),0 0 32px rgba(34,211,238,.42);animation:glow 3.2s ease-in-out infinite;backdrop-filter:blur(6px)}
@keyframes glow{50%{box-shadow:0 0 28px rgba(124,92,255,.78),0 0 46px rgba(34,211,238,.52);transform:translateY(-1px)}}

/* Accesibilidad y responsivo adicional */
@media (max-width:880px){
  .hero{grid-template-columns:1fr;min-height:auto}
  .orb{width:min(84vw, 360px);height:min(84vw, 360px);margin:8px auto 0}
}
</style>
</head>
<body>

<!-- Tabs -->
<input type="radio" name="tab" id="t-home" checked>
<input type="radio" name="tab" id="t-svc">
<input type="radio" name="tab" id="t-clients">
<input type="radio" name="tab" id="t-farm">

<!-- ====== Sprite (logos fieles) ====== -->
<svg width="0" height="0" aria-hidden="true" style="position:absolute">
  <defs>
    <symbol id="i-sun" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5" fill="none" stroke="currentColor" stroke-width="2"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2"/></symbol>
    <symbol id="i-moon" viewBox="0 0 24 24"><path d="M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.4 5.4 0 0 1-4.4 2.26 5.4 5.4 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z" fill="none" stroke="currentColor" stroke-width="2"/></symbol>

    <!-- Instagram -->
    <symbol id="lg-ig" viewBox="0 0 24 24">
      <rect x="3" y="3" width="18" height="18" rx="5" fill="none" stroke="#E1306C" stroke-width="2"/>
      <circle cx="12" cy="12" r="4" fill="none" stroke="#E1306C" stroke-width="2"/>
      <circle cx="17.2" cy="6.8" r="1.2" fill="#E1306C"/>
    </symbol>
    <!-- TikTok (trazo + acentos fieles) -->
    <symbol id="lg-tiktok" viewBox="0 0 24 24">
      <path d="M11 4v9.6a3.4 3.4 0 1 1-2.5 5.4" fill="none" stroke="#69C9D0" stroke-width="2" stroke-linecap="round"/>
      <path d="M15 4c.4 2.6 2.4 4.4 5 4.6" fill="none" stroke="#FF0050" stroke-width="2" stroke-linecap="round"/>
    </symbol>
    <!-- YouTube -->
    <symbol id="lg-yt" viewBox="0 0 24 24">
      <rect x="3" y="6" width="18" height="12" rx="3" fill="#FF0000"/><path d="M10 9l6 3-6 3z" fill="#fff"/>
    </symbol>
    <!-- Threads -->
    <symbol id="lg-threads" viewBox="0 0 24 24">
      <path d="M6 12c0-4 3-7 6-7s6 3 6 7-3 7-6 7c-2 0-3.6-1-3.6-2.6S9 14 12 14c2.6 0 3.9-1.2 3.9-3S14.5 8 12 8" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
    </symbol>
    <!-- X -->
    <symbol id="lg-x" viewBox="0 0 24 24"><path d="M4 4l16 16M20 4L4 20" stroke="#fff" stroke-width="2"/></symbol>
    <!-- Facebook -->
    <symbol id="lg-fb" viewBox="0 0 24 24"><path d="M14 8h3V5h-3c-2 0-3 .9-3 3v2H8v3h3v6h3v-6h3l1-3h-4V8c0-.7.3-1 1-1z" fill="#1877F2"/></symbol>
    <!-- LinkedIn -->
    <symbol id="lg-li" viewBox="0 0 24 24"><rect x="3" y="8" width="4" height="12" fill="#0A66C2"/><circle cx="5" cy="5.5" r="2" fill="#0A66C2"/><rect x="9" y="8" width="12" height="12" rx="2" fill="none" stroke="#0A66C2" stroke-width="2"/></symbol>
    <!-- Spotify -->
    <symbol id="lg-spotify" viewBox="0 0 24 24"><circle cx="12" cy="12" r="9" fill="#1DB954"/><path d="M7 10c3-1 7-1 10 1M7 13c3-1 6-1 9 1M7 16c2-.5 4-.5 6 .5" stroke="#fff" stroke-width="2" fill="none" stroke-linecap="round"/></symbol>
    <!-- Telegram -->
    <symbol id="lg-tg" viewBox="0 0 24 24"><path d="M21 3L3 11l6 2 2 6 3-4 4-10z" fill="#0088cc"/></symbol>
    <!-- WhatsApp -->
    <symbol id="lg-wa" viewBox="0 0 24 24"><path d="M12 3a9 9 0 0 1 0 18 9.4 9.4 0 0 1-4-.9L5 21l.9-3.1A9.4 9.4 0 0 1 3 12 9 9 0 0 1 12 3z" fill="#25D366"/><path d="M9 8c0 3 3 6 5 6l1-1" stroke="#fff" stroke-width="2" fill="none" stroke-linecap="round"/></symbol>
  </defs>
</svg>

<div class="app" id="app">
  <!-- Top -->
  <header class="top">
    <div class="brand"><div class="badge"></div><div class="word">KraveAI</div></div>
    <div class="status"><span class="dot" id="dot"></span><small id="stat">Conectando…</small></div>
    <button class="tog" id="themeBtn" aria-label="Tema">
      <svg class="icon-sun" width="18" height="18"><use href="#i-sun"/></svg>
      <svg class="icon-moon" width="18" height="18"><use href="#i-moon"/></svg>
    </button>
  </header>

  <main class="main">
    <!-- HOME -->
    <section class="view" data-tab="home">
      <div class="container">
        <div class="hero">
          <!-- Columna izquierda -->
          <div>
            <div class="h1">Redes sociales</div>
            <div class="sub">Domina todas tus redes con IA</div>

            <div class="section-title">Redes sociales</div>
            <div class="networks" id="networks"></div>

            <div class="section-title" style="margin-top:16px">Clientes recientes</div>
            <div class="clients" id="clients"></div>

            <div class="quick">
              <span>➕</span>
              <input id="quickInput" placeholder="¿Qué quieres automatizar hoy?">
              <button class="btn" id="quickBtn">Enviar</button>
            </div>
          </div>

          <!-- Columna derecha: ORB centrado -->
          <div class="orb-stage">
            <div class="orb" aria-hidden="true"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Servicios (profundidad) -->
    <section class="view" data-tab="svc">
      <div class="container">
        <button id="goHome" class="btn-outline" style="border:1px solid var(--line);padding:8px 12px;border-radius:10px;background:transparent;color:var(--text)">← Volver</button>
        <div class="h1" id="svcTitle" style="margin-top:10px">Servicios</div>
        <div id="svcAnchor" style="height:1px"></div>
        <!-- Aquí colocarías tus paneles por red (como ya tenías) -->
      </div>
    </section>

    <!-- Clients vista aparte (opcional) -->
    <section class="view" data-tab="clients">
      <div class="container">
        <div class="h1">Clientes recientes</div>
        <div class="sub">Cuentas verificadas en Instagram</div>
        <div class="clients" id="clients2"></div>
      </div>
    </section>

    <!-- Farm -->
    <section class="view" data-tab="farm">
      <div class="container">
        <div class="h1">Device Farm</div>
        <div class="farm-grid" id="farmGrid"></div>
      </div>
    </section>
  </main>

  <div class="credit">Created by Karmean Gómez</div>

  <!-- Bottom -->
  <nav class="nav">
    <label class="tab" for="t-home">🏠<small>Inicio</small></label>
    <label class="tab" for="t-svc">🛠️<small>Servicios</small></label>
    <label class="tab" for="t-clients">👥<small>Clientes</small></label>
    <label class="tab" for="t-farm">📱<small>Farm</small></label>
  </nav>
</div>

<script>
(function(){
  const API_URL = "https://api.kraveapi.xyz";

  // Tema
  const themeBtn=document.getElementById('themeBtn');
  const saved=localStorage.getItem('krv_theme')||'system';
  applyTheme(saved);
  themeBtn.addEventListener('click',()=>{
    const cur=document.documentElement.getAttribute('data-theme');
    const next=cur==='light'?'dark':'light';
    document.documentElement.setAttribute('data-theme',next);
    localStorage.setItem('krv_theme',next);
  });
  function applyTheme(mode){
    if(mode==='system'){
      const dark=matchMedia('(prefers-color-scheme: dark)').matches;
      document.documentElement.setAttribute('data-theme', dark?'dark':'light');
    }else{
      document.documentElement.setAttribute('data-theme', mode);
    }
  }

  // Estado backend (sin datos falsos)
  const dot=document.getElementById('dot'), stat=document.getElementById('stat');
  async function health(){
    try{
      const r=await fetch(`${API_URL}/health`,{credentials:'include'});
      dot.style.background=r.ok?'var(--ok)':'var(--err)';
      stat.textContent=r.ok?'Conectado':'Sin conexión';
    }catch{
      dot.style.background='var(--err)'; stat.textContent='Sin conexión';
    }
  }
  health(); setInterval(health,120000);

  // Redes (solo botones, sin métricas)
  const networks = [
    {k:'instagram', label:'Instagram', icon:'#lg-ig'},
    {k:'tiktok', label:'TikTok', icon:'#lg-tiktok'},
    {k:'youtube', label:'YouTube', icon:'#lg-yt'},
    {k:'threads', label:'Threads', icon:'#lg-threads'},
    {k:'x', label:'X', icon:'#lg-x'},
    {k:'facebook', label:'Facebook', icon:'#lg-fb'},
    {k:'linkedin', label:'LinkedIn', icon:'#lg-li'},
    {k:'spotify', label:'Spotify', icon:'#lg-spotify'},
    {k:'telegram', label:'Telegram', icon:'#lg-tg'},
    {k:'whatsapp', label:'WhatsApp', icon:'#lg-wa'}
  ];
  const netGrid=document.getElementById('networks');
  netGrid.innerHTML=networks.map(n=>`
    <button class="pill" data-k="${n.k}">
      <span class="pico"><svg width="18" height="18"><use href="${n.icon}"/></svg></span>
      <span class="plab">${n.label}</span>
    </button>
  `).join('');
  netGrid.addEventListener('click',(e)=>{
    const b=e.target.closest('.pill'); if(!b) return;
    document.getElementById('t-svc').checked=true;
    // scroll al ancla de servicios (sin datos falsos)
    setTimeout(()=>document.getElementById('svcAnchor').scrollIntoView({behavior:'smooth',block:'start'}),60);
  });

  // Clientes (solo los que me diste; si no hay foto => logo IG)
  const clients = [
    {h:'@aaronmercury', a:''},
    {h:'@televisadigital', a:''},
    {h:'@joscanela', a:''},
    {h:'@jimenagallegotv', a:''},
  ];
  function renderClients(id){
    const host=document.getElementById(id);
    host.innerHTML = clients.map(c=>`
      <div class="client">
        <div class="avatar">
          ${c.a? `<img src="${c.a}" alt="${c.h}">` :
          `<svg width="36" height="36" viewBox="0 0 24 24" style="transform:scale(.92)"><use href="#lg-ig"/></svg>`}
          <span class="tick">✓</span>
        </div>
        <div class="handle">${c.h}</div>
        <div class="platform">Instagram</div>
      </div>
    `).join('');
  }
  renderClients('clients'); renderClients('clients2');

  // Quick
  document.getElementById('quickBtn').addEventListener('click',()=>{
    const v=(document.getElementById('quickInput').value||'').trim();
    if(!v){toast('Escribe qué automatizar');return}
    toast('Automatizando: '+v);
    document.getElementById('quickInput').value='';
  });

  // Volver
  document.getElementById('goHome').addEventListener('click',()=>{document.getElementById('t-home').checked=true});

  // Farm mínima (placeholder sin romper tu lógica)
  const farmGrid=document.getElementById('farmGrid');
  const devices=[
    {id:'dev1',name:'iPhone 14 Pro',os:'iOS',ip:'10.0.0.8'},
    {id:'dev2',name:'Galaxy S23',os:'Android',ip:'10.0.0.9'},
    {id:'dev3',name:'iPhone 13',os:'iOS',ip:'10.0.0.10'},
    {id:'dev4',name:'Pixel 8',os:'Android',ip:'10.0.0.11'},
  ];
  function renderFarm(){
    farmGrid.innerHTML=devices.map(d=>{
      const src=localStorage.getItem('stream:'+d.id)||'';
      return `
      <div class="dev">
        <div class="dev-head"><div><strong>${d.name}</strong> · ${d.os}</div>
        <div class="chips"><span class="chip" data-live="${src?1:0}">${src?'Live':'Idle'}</span><span class="chip">${d.ip}</span></div></div>
        <div class="screen">${src?(src.endsWith('.mjpg')||src.endsWith('.mjpeg')?`<img src="${src}">`:src.endsWith('.m3u8')?`<video src="${src}" autoplay muted playsinline></video>`:`<iframe src="${src}" allow="autoplay; encrypted-media" allowfullscreen></iframe>`):'<div class="placeholder"></div>'}</div>
        <div class="dev-actions"><button class="btn-outline" data-set="${d.id}">Asignar stream</button><button class="btn-outline" data-clear="${d.id}">Limpiar</button></div>
      </div>`;
    }).join('');
  }
  renderFarm();
  farmGrid.addEventListener('click',(e)=>{
    const b=e.target.closest('button'); if(!b) return;
    if(b.dataset.set){
      const id=b.dataset.set; const cur=localStorage.getItem('stream:'+id)||'';
      const url=prompt('URL stream (HLS .m3u8, MJPEG .mjpg, o https):',cur);
      if(url!==null){localStorage.setItem('stream:'+id,url.trim());renderFarm();toast('Stream actualizado')}
    }
    if(b.dataset.clear){localStorage.removeItem('stream:'+b.dataset.clear);renderFarm();toast('Stream limpiado')}
  });

  // Toast
  function toast(msg){const el=document.createElement('div');el.textContent=msg;el.style.cssText=`position:fixed;left:50%;top:12px;transform:translateX(-50%);z-index:9999;background:#111827;color:#fff;padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.12)`;document.body.appendChild(el);setTimeout(()=>el.remove(),2100)}

})();
</script>
</body>
</html>